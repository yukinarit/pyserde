<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>pyserde documentation</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon-de23e50b.svg">
        <link rel="shortcut icon" href="favicon-8114d1fc.png">
        <link rel="stylesheet" href="css/variables-8adf115d.css">
        <link rel="stylesheet" href="css/general-2459343d.css">
        <link rel="stylesheet" href="css/chrome-ae938929.css">
        <link rel="stylesheet" href="css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex-fe211702.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc-65ba6fac.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>‚Üê</kbd> or <kbd>‚Üí</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">pyserde documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>
                        <a href="https://github.com/yukinarit/pyserde" title="Git repository" aria-label="Git repository">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p><code>pyserde</code> is a simple yet powerful serialization library on top of <a href="https://docs.python.org/3/library/dataclasses.html">dataclasses</a>. It allows you to convert Python objects to and from JSON, YAML, and other formats easily and efficiently.</p>
<p>Declare your class with <code>@serde</code> decorator and annotate fields using <a href="https://peps.python.org/pep-0484/">PEP484</a> as below.</p>
<pre><code class="language-python">from serde import serde

@serde
class Foo:
    i: int
    s: str
    f: float
    b: bool
</code></pre>
<p>You can serialize <code>Foo</code> object into JSON.</p>
<pre><code class="language-python">&gt;&gt;&gt; from serde.json import to_json
&gt;&gt;&gt; to_json(Foo(i=10, s='foo', f=100.0, b=True))
'{"i":10,"s":"foo","f":100.0,"b":true}'
</code></pre>
<p>You can deserialize JSON into <code>Foo</code> object.</p>
<pre><code class="language-python">&gt;&gt;&gt; from serde.json import from_json
&gt;&gt;&gt; from_json(Foo, '{"i": 10, "s": "foo", "f": 100.0, "b": true}')
Foo(i=10, s='foo', f=100.0, b=True)
</code></pre>
<h2 id="next-steps"><a class="header" href="#next-steps">Next Steps</a></h2>
<ul>
<li><a href="#getting-started">Getting started</a></li>
<li><a href="https://yukinarit.github.io/pyserde/api/serde.html">API Reference</a></li>
<li><a href="https://github.com/yukinarit/pyserde/tree/main/examples">Examples</a></li>
<li><a href="#faq">FAQ</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="getting-started"><a class="header" href="#getting-started">Getting started</a></h1>
<h2 id="installation"><a class="header" href="#installation">Installation</a></h2>
<p>Install pyserde from PyPI. pyserde requires Python&gt;=3.10.</p>
<pre><code>pip install pyserde
</code></pre>
<p>If you‚Äôre using uv, run this command.</p>
<pre><code>uv add pyserde
</code></pre>
<p>Additional data formats besides JSON and Pickle need additional dependencies installed. Install <code>msgpack</code>, <code>toml</code> or <code>yaml</code> extras to work with the appropriate data formats; you can skip formats that you don‚Äôt plan to use. For example, if you want to use Toml and YAML:</p>
<pre><code>pip install "pyserde[toml,yaml]"
</code></pre>
<p>With uv</p>
<pre><code>uv add pyserde --extra toml --extra yaml
</code></pre>
<p>Or all at once:</p>
<pre><code>pip install "pyserde[all]"
</code></pre>
<p>With uv</p>
<pre><code>uv add pyserde --extra all
</code></pre>
<p>Here are the available extras</p>
<ul>
<li><code>all</code>: Install <code>msgpack</code>, <code>toml</code>, <code>yaml</code>, <code>numpy</code>, <code>orjson</code>, and <code>sqlalchemy</code> extras</li>
<li><code>msgpack</code>: Install <a href="https://github.com/msgpack/msgpack-python">msgpack</a></li>
<li><code>toml</code>: Install <a href="https://github.com/hukkin/tomli">tomli</a> and <a href="https://github.com/hukkin/tomli-w">tomli-w</a>
<ul>
<li>NOTE: <a href="https://docs.python.org/3/library/tomllib.html">tomllib</a> is used for python 3.11 onwards</li>
</ul>
</li>
<li><code>yaml</code>: Install <a href="https://github.com/yaml/pyyaml">pyyaml</a></li>
<li><code>numpy</code>: Install <a href="https://github.com/numpy/numpy">numpy</a></li>
<li><code>orjson</code>: Install <a href="https://github.com/ijl/orjson">orjson</a></li>
<li><code>sqlalchemy</code>: Install <a href="https://github.com/sqlalchemy/sqlalchemy">sqlalchemy</a></li>
</ul>
<h2 id="define-your-first-pyserde-class"><a class="header" href="#define-your-first-pyserde-class">Define your first pyserde class</a></h2>
<p>Define your class with pyserde‚Äôs <code>@serde</code> decorators. Be careful that module name is <code>serde</code>, not <code>pyserde</code>. <code>pyserde</code> heavily depends on the standard library‚Äôs <code>dataclasses</code> module. If you are new to dataclass, I would recommend to read <a href="https://docs.python.org/3/library/dataclasses.html">dataclasses documentation</a> first.</p>
<pre><code class="language-python">from serde import serde

@serde
class Foo:
    i: int
    s: str
    f: float
    b: bool
</code></pre>
<p>pyserde generates methods necessary for (de)serialization by <code>@serde</code> when a class is loaded into python interpreter. The code generation occurs only once and there is no overhead when you use the class. Now your class is serializable and deserializable in all the data formats supported by pyserde.</p>
<blockquote>
<p><strong>NOTE:</strong> If you need only either serialization or deserialization functionality, you can use <code>@serialize</code> or <code>@deserialize</code> instead of <code>@serde</code> decorator.</p>
<p>e.g. If you do only serialization, you can use <code>@serialize</code> decorator. But calling deserialize API e.g. <code>from_json</code> for <code>Foo</code> will raise an error.</p>
<pre><code class="language-python">from serde import serialize

@serialize
class Foo:
    i: int
    s: str
    f: float
    b: bool
</code></pre>
</blockquote>
<h2 id="pep585-and-pep604"><a class="header" href="#pep585-and-pep604">PEP585 and PEP604</a></h2>
<p><a href="https://www.python.org/dev/peps/pep-0585/">PEP585</a> style annotations and the <a href="https://www.python.org/dev/peps/pep-0604/">PEP604</a> union operator are supported for python&gt;=3.10. With PEP585 and PEP604, you can write a pyserde class pretty neatly.</p>
<pre><code class="language-python">@serde
class Foo:
    a: int
    b: list[str]
    c: tuple[int, float, str, bool]
    d: dict[str, list[tuple[str, int]]]
    e: str | None
</code></pre>
<h2 id="use-pyserde-class"><a class="header" href="#use-pyserde-class">Use pyserde class</a></h2>
<p>Next, import pyserde (de)serialize APIs. For JSON:</p>
<pre><code class="language-python">from serde.json import from_json, to_json
</code></pre>
<p>Use <code>to_json</code> to serialize the object into JSON.</p>
<pre><code>f = Foo(i=10, s='foo', f=100.0, b=True)
print(to_json(f))
</code></pre>
<p>Pass <code>Foo</code> class and JSON string in <code>from_json</code> to deserialize JSON into the object.</p>
<pre><code class="language-python">s = '{"i": 10, "s": "foo", "f": 100.0, "b": true}'
print(from_json(Foo, s))
</code></pre>
<p>That‚Äôs it! pyserde offers many more features. If you‚Äôre interested, please read the rest of the documentation.</p>
<blockquote>
<p>üí° Tip: which type checker should I use?
pyserde depends on <a href="https://peps.python.org/pep-0681/">PEP681 dataclass_transform</a>. <a href="https://github.com/python/mypy">mypy</a> does not fully support dataclass_transform as of Jan. 2024. My personal recommendation is <a href="https://github.com/microsoft/pyright">pyright</a>.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="data-formats"><a class="header" href="#data-formats">Data Formats</a></h1>
<p>pyserde supports several data formats for serialization and deserialization, including <code>dict</code>, <code>tuple</code>, <code>JSON</code>, <code>YAML</code>, <code>TOML</code>, <code>MsgPack</code>, and <code>Pickle</code>. Each API can take additional keyword arguments, which are forwarded to the underlying packages used by pyserde.</p>
<p>e.g. If you want to preserve the field order in YAML, you can pass <code>sort_key=True</code> in <code>serde.yaml.to_yaml</code></p>
<pre><code class="language-python">serde.yaml.to_yaml(foo, sort_key=True)
</code></pre>
<p><code>sort_key=True</code> will be passed in the <a href="https://github.com/yukinarit/pyserde/blob/a9f44d52d109144a4c3bb93965f831e91d13960b/serde/yaml.py#L18">yaml.safedump</a></p>
<h2 id="dict"><a class="header" href="#dict">dict</a></h2>
<pre><code class="language-python">&gt;&gt;&gt; from serde import to_dict, from_dict

&gt;&gt;&gt; to_dict(Foo(i=10, s='foo', f=100.0, b=True))
{"i": 10, "s": "foo", "f": 100.0, "b": True}

&gt;&gt;&gt; from_dict(Foo, {"i": 10, "s": "foo", "f": 100.0, "b": True})
Foo(i=10, s='foo', f=100.0, b=True)
</code></pre>
<p>See <a href="https://yukinarit.github.io/pyserde/api/serde/se.html#to_dict">serde.to_dict</a> / <a href="https://yukinarit.github.io/pyserde/api/serde/de.html#from_dict">serde.from_dict</a> for more information.</p>
<h2 id="tuple"><a class="header" href="#tuple">tuple</a></h2>
<pre><code class="language-python">&gt;&gt;&gt; from serde import to_tuple, from_tuple

&gt;&gt;&gt; to_tuple(Foo(i=10, s='foo', f=100.0, b=True))
(10, 'foo', 100.0, True)

&gt;&gt;&gt; from_tuple(Foo, (10, 'foo', 100.0, True))
Foo(i=10, s='foo', f=100.0, b=True)
</code></pre>
<p>See <a href="https://yukinarit.github.io/pyserde/api/serde/se.html#to_tuple">serde.to_tuple</a> / <a href="https://yukinarit.github.io/pyserde/api/serde/de.html#from_tuple">serde.from_tuple</a> for more information.</p>
<h2 id="json"><a class="header" href="#json">JSON</a></h2>
<pre><code class="language-python">&gt;&gt;&gt; from serde.json import to_json, from_json

&gt;&gt;&gt; to_json(Foo(i=10, s='foo', f=100.0, b=True))
'{"i":10,"s":"foo","f":100.0,"b":true}'

&gt;&gt;&gt; from_json(Foo, '{"i": 10, "s": "foo", "f": 100.0, "b": true}')
Foo(i=10, s='foo', f=100.0, b=True)
</code></pre>
<p>See <a href="https://yukinarit.github.io/pyserde/api/serde/json.html#to_json">serde.json.to_json</a> / <a href="https://yukinarit.github.io/pyserde/api/serde/json.html#from_json">serde.json.from_json</a> for more information.</p>
<h2 id="yaml"><a class="header" href="#yaml">Yaml</a></h2>
<pre><code class="language-python">&gt;&gt;&gt; from serde.yaml import from_yaml, to_yaml

&gt;&gt;&gt; to_yaml(Foo(i=10, s='foo', f=100.0, b=True))
b: true
f: 100.0
i: 10
s: foo

&gt;&gt;&gt; from_yaml(Foo, 'b: true\nf: 100.0\ni: 10\ns: foo')
Foo(i=10, s='foo', f=100.0, b=True)
</code></pre>
<p>See <a href="https://yukinarit.github.io/pyserde/api/serde/yaml.html#to_yaml">serde.yaml.to_yaml</a> / <a href="https://yukinarit.github.io/pyserde/api/serde/yaml.html#from_yaml">serde.yaml.from_yaml</a> for more information.</p>
<h2 id="toml"><a class="header" href="#toml">Toml</a></h2>
<pre><code class="language-python">&gt;&gt;&gt; from serde.toml import from_toml, to_toml

&gt;&gt;&gt; to_toml(Foo(i=10, s='foo', f=100.0, b=True))
i = 10
s = "foo"
f = 100.0
b = true

&gt;&gt;&gt; from_toml(Foo, 'i = 10\ns = "foo"\nf = 100.0\nb = true')
Foo(i=10, s='foo', f=100.0, b=True)
</code></pre>
<p>See <a href="https://yukinarit.github.io/pyserde/api/serde/toml.html#to_toml">serde.toml.to_toml</a> / <a href="https://yukinarit.github.io/pyserde/api/serde/toml.html#from_toml">serde.toml.from_toml</a> for more information.</p>
<h2 id="msgpack"><a class="header" href="#msgpack">MsgPack</a></h2>
<pre><code class="language-python">
&gt;&gt;&gt; from serde.msgpack import from_msgpack, to_msgpack

&gt;&gt;&gt; to_msgpack(Foo(i=10, s='foo', f=100.0, b=True))
b'\x84\xa1i\n\xa1s\xa3foo\xa1f\xcb@Y\x00\x00\x00\x00\x00\x00\xa1b\xc3'

&gt;&gt;&gt; from_msgpack(Foo, b'\x84\xa1i\n\xa1s\xa3foo\xa1f\xcb@Y\x00\x00\x00\x00\x00\x00\xa1b\xc3')
Foo(i=10, s='foo', f=100.0, b=True)
</code></pre>
<p>See <a href="https://yukinarit.github.io/pyserde/api/serde/msgpack.html#to_msgpack">serde.msgpack.to_msgpack</a> / <a href="https://yukinarit.github.io/pyserde/api/serde/msgpack.html#from_msgpack">serde.msgpack.from_msgpack</a> for more information.</p>
<h2 id="pickle"><a class="header" href="#pickle">Pickle</a></h2>
<p>New in v0.9.6</p>
<pre><code class="language-python">&gt;&gt;&gt; from serde.pickle import from_pickle, to_pickle

&gt;&gt;&gt; to_pickle(Foo(i=10, s='foo', f=100.0, b=True))
b"\x80\x04\x95'\x00\x00\x00\x00\x00\x00\x00}\x94(\x8c\x01i\x94K\n\x8c\x01s\x94\x8c\x03foo\x94\x8c\x01f\x94G@Y\x00\x00\x00\x00\x00\x00\x8c\x01b\x94\x88u."

&gt;&gt;&gt; from_pickle(Foo, b"\x80\x04\x95'\x00\x00\x00\x00\x00\x00\x00}\x94(\x8c\x01i\x94K\n\x8c\x01s\x94\x8c\x03foo\x94\x8c\x01f\x94G@Y\x00\x00\x00\x00\x00\x00\x8c\x01b\x94\x88u.")
Foo(i=10, s='foo', f=100.0, b=True)
</code></pre>
<p>See <a href="https://yukinarit.github.io/pyserde/api/serde/pickle.html#to_pickle">serde.pickle.to_pickle</a> / <a href="https://yukinarit.github.io/pyserde/api/serde/pickle.html#from_pickle">serde.pickle.from_pickle</a> for more information.</p>
<h2 id="needs-a-new-data-format-support"><a class="header" href="#needs-a-new-data-format-support">Needs a new data format support?</a></h2>
<p>We don‚Äôt plan to supprot a data format such as XML to keep pyserde as simple as possible. If you need a new data format support, we recommend to create a separate python package. If the data format is interchangable to dict or tuple, implementing the serialize/desrialize API is not that difficult. See <a href="https://github.com/yukinarit/pyserde/blob/main/serde/yaml.py">YAML‚Äôs implementation</a> to know how to implement.</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="types"><a class="header" href="#types">Types</a></h1>
<p>Here is the list of the supported types. See the simple example for each type in the footnotes</p>
<ul>
<li>Primitives (int, float, str, bool) <sup class="footnote-reference" id="fr-1-1"><a href="#footnote-1">1</a></sup></li>
<li>Containers
<ul>
<li><code>list</code>, <code>collections.abc.Sequence</code>, <code>collections.abc.MutableSequence</code>, <code>tuple</code> <sup class="footnote-reference" id="fr-2-1"><a href="#footnote-2">2</a></sup></li>
<li><code>set</code>, <code>collections.abc.Set</code>, <code>collections.abc.MutableSet</code> <sup class="footnote-reference" id="fr-2-2"><a href="#footnote-2">2</a></sup></li>
<li><code>dict</code>, <code>collections.abc.Mapping</code>, <code>collections.abc.MutableMapping</code> <sup class="footnote-reference" id="fr-2-3"><a href="#footnote-2">2</a></sup></li>
<li><a href="https://docs.python.org/3/library/stdtypes.html#frozenset"><code>frozenset</code></a>, <sup class="footnote-reference" id="fr-3-1"><a href="#footnote-3">3</a></sup></li>
<li><a href="https://docs.python.org/3/library/collections.html#collections.defaultdict"><code>defaultdict</code></a> <sup class="footnote-reference" id="fr-4-1"><a href="#footnote-4">4</a></sup></li>
<li><a href="https://docs.python.org/3/library/collections.html#collections.deque"><code>deque</code></a> <sup class="footnote-reference" id="fr-25-1"><a href="#footnote-25">5</a></sup></li>
<li><a href="https://docs.python.org/3/library/collections.html#collections.Counter"><code>Counter</code></a> <sup class="footnote-reference" id="fr-26-1"><a href="#footnote-26">6</a></sup></li>
</ul>
</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Optional"><code>typing.Optional</code></a> <sup class="footnote-reference" id="fr-5-1"><a href="#footnote-5">7</a></sup></li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Union"><code>typing.Union</code></a> <sup class="footnote-reference" id="fr-6-1"><a href="#footnote-6">8</a></sup> <sup class="footnote-reference" id="fr-7-1"><a href="#footnote-7">9</a></sup> <sup class="footnote-reference" id="fr-8-1"><a href="#footnote-8">10</a></sup></li>
<li>User defined class with <a href="https://docs.python.org/3/library/dataclasses.html"><code>@dataclass</code></a> <sup class="footnote-reference" id="fr-9-1"><a href="#footnote-9">11</a></sup> <sup class="footnote-reference" id="fr-10-1"><a href="#footnote-10">12</a></sup></li>
<li><a href="https://docs.python.org/3/library/typing.html#newtype"><code>typing.NewType</code></a> for primitive types <sup class="footnote-reference" id="fr-11-1"><a href="#footnote-11">13</a></sup></li>
<li><a href="https://docs.python.org/3/library/typing.html#the-any-type"><code>typing.Any</code></a> <sup class="footnote-reference" id="fr-12-1"><a href="#footnote-12">14</a></sup></li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Literal"><code>typing.Literal</code></a> <sup class="footnote-reference" id="fr-13-1"><a href="#footnote-13">15</a></sup></li>
<li><a href="https://docs.python.org/3/library/typing.html#user-defined-generic-types"><code>typing.Generic</code></a> <sup class="footnote-reference" id="fr-14-1"><a href="#footnote-14">16</a></sup></li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.ClassVar"><code>typing.ClassVar</code></a> <sup class="footnote-reference" id="fr-15-1"><a href="#footnote-15">17</a></sup></li>
<li><a href="https://docs.python.org/3/library/dataclasses.html#init-only-variables"><code>typing.InitVar</code></a> <sup class="footnote-reference" id="fr-16-1"><a href="#footnote-16">18</a></sup></li>
<li><a href="https://docs.python.org/3/library/enum.html#enum.Enum"><code>Enum</code></a> and <a href="https://docs.python.org/3/library/enum.html#enum.IntEnum"><code>IntEnum</code></a> <sup class="footnote-reference" id="fr-17-1"><a href="#footnote-17">19</a></sup></li>
<li>Standard library
<ul>
<li><a href="https://docs.python.org/3/library/pathlib.html"><code>pathlib.Path</code></a> <sup class="footnote-reference" id="fr-18-1"><a href="#footnote-18">20</a></sup></li>
<li><a href="https://docs.python.org/3/library/decimal.html"><code>decimal.Decimal</code></a> <sup class="footnote-reference" id="fr-19-1"><a href="#footnote-19">21</a></sup></li>
<li><a href="https://docs.python.org/3/library/uuid.html"><code>uuid.UUID</code></a> <sup class="footnote-reference" id="fr-20-1"><a href="#footnote-20">22</a></sup></li>
<li><a href="https://docs.python.org/3/library/datetime.html#date-objects"><code>datetime.date</code></a>, <a href="https://docs.python.org/3/library/datetime.html#time-objects"><code>datetime.time</code></a>, <a href="https://docs.python.org/3/library/datetime.html#datetime-objects"><code>datetime.datetime</code></a> <sup class="footnote-reference" id="fr-21-1"><a href="#footnote-21">23</a></sup></li>
<li><a href="https://docs.python.org/3/library/ipaddress.html"><code>ipaddress</code></a> <sup class="footnote-reference" id="fr-22-1"><a href="#footnote-22">24</a></sup></li>
</ul>
</li>
<li>PyPI library
<ul>
<li><a href="https://github.com/numpy/numpy"><code>numpy</code></a> types <sup class="footnote-reference" id="fr-23-1"><a href="#footnote-23">25</a></sup></li>
<li><a href="https://github.com/sqlalchemy/sqlalchemy"><code>SQLAlchemy</code></a> Declarative Dataclass Mapping (experimental) <sup class="footnote-reference" id="fr-24-1"><a href="#footnote-24">26</a></sup></li>
</ul>
</li>
</ul>
<p>You can write pretty complex class like this:</p>
<pre><code class="language-python">@serde
class bar:
    i: int

@serde
class Foo:
    a: int
    b: list[str]
    c: tuple[int, float, str, bool]
    d: dict[str, list[tuple[str, int]]]
    e: str | None
    f: Bar
</code></pre>
<h2 id="numpy"><a class="header" href="#numpy">Numpy</a></h2>
<p>All of the above (de)serialization methods can transparently handle most numpy types with the ‚Äúnumpy‚Äù extras package.</p>
<pre><code class="language-python">import numpy as np
import numpy.typing as npt

@serde
class NPFoo:
    i: np.int32
    j: np.int64
    f: np.float32
    g: np.float64
    h: np.bool_
    u: np.ndarray
    v: npt.NDArray
    w: npt.NDArray[np.int32]
    x: npt.NDArray[np.int64]
    y: npt.NDArray[np.float32]
    z: npt.NDArray[np.float64]

npfoo = NPFoo(
    np.int32(1),
    np.int64(2),
    np.float32(3.0),
    np.float64(4.0),
    np.bool_(False),
    np.array([1, 2]),
    np.array([3, 4]),
    np.array([np.int32(i) for i in [1, 2]]),
    np.array([np.int64(i) for i in [3, 4]]),
    np.array([np.float32(i) for i in [5.0, 6.0]]),
    np.array([np.float64(i) for i in [7.0, 8.0]]),
)
</code></pre>
<pre><code class="language-python">&gt;&gt;&gt; from serde.json import to_json, from_json

&gt;&gt;&gt; to_json(npfoo)
'{"i": 1, "j": 2, "f": 3.0, "g": 4.0, "h": false, "u": [1, 2], "v": [3, 4], "w": [1, 2], "x": [3, 4], "y": [5.0, 6.0], "z": [7.0, 8.0]}'

&gt;&gt;&gt; from_json(NPFoo, to_json(npfoo))
NPFoo(i=1, j=2, f=3.0, g=4.0, h=False, u=array([1, 2]), v=array([3, 4]), w=array([1, 2], dtype=int32), x=array([3, 4]), y=array([5., 6.], dtype=float32), z=array([7., 8.]))
</code></pre>
<h2 id="sqlalchemy-declarative-dataclass-mapping-experimental"><a class="header" href="#sqlalchemy-declarative-dataclass-mapping-experimental">SQLAlchemy Declarative Dataclass Mapping (experimental)</a></h2>
<p>While experimental support for SQLAlchemy Declarative Dataclass Mapping integration has been added, certain features such as <code>@serde(type_check=strict)</code> and <code>serde.field()</code> are not currently supported.</p>
<p>It‚Äôs recommended to exercise caution when relying on experimental features in production environments. It‚Äôs also advisable to thoroughly test your code and be aware of potential limitations or unexpected behavior.</p>
<h2 id="needs-a-new-type-support"><a class="header" href="#needs-a-new-type-support">Needs a new type support?</a></h2>
<p>If you need to use a type which is currently not supported in the standard library, please creat a Github issue to request. For types in third party python packages, unless it‚Äôs polular like numpy, we don‚Äôt plan to support it to keep pyserde as simple as possible. We recommend to use custom class or field serializer.</p>
<hr>
<ol class="footnote-definition">
<li id="footnote-1">
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/simple.py">examples/simple.py</a> <a href="#fr-1-1">‚Ü©</a></p>
</li>
<li id="footnote-2">
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/collection.py">examples/collection.py</a> <a href="#fr-2-1">‚Ü©</a> <a href="#fr-2-2">‚Ü©2</a> <a href="#fr-2-3">‚Ü©3</a></p>
</li>
<li id="footnote-3">
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/frozen_set.py">examples/frozen_set.py</a> <a href="#fr-3-1">‚Ü©</a></p>
</li>
<li id="footnote-4">
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/default_dict.py">examples/default_dict.py</a> <a href="#fr-4-1">‚Ü©</a></p>
</li>
<li id="footnote-25">
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/deque.py">examples/deque.py</a> <a href="#fr-25-1">‚Ü©</a></p>
</li>
<li id="footnote-26">
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/counter.py">examples/counter.py</a> <a href="#fr-26-1">‚Ü©</a></p>
</li>
<li id="footnote-5">
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/union.py">examples/union.py</a> <a href="#fr-5-1">‚Ü©</a></p>
</li>
<li id="footnote-6">
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/union.py">examples/union.py</a> <a href="#fr-6-1">‚Ü©</a></p>
</li>
<li id="footnote-7">
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/union_operator.py">examples/union_operator.py</a> <a href="#fr-7-1">‚Ü©</a></p>
</li>
<li id="footnote-8">
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/union_tagging.py">examples/union_tagging.py</a> <a href="#fr-8-1">‚Ü©</a></p>
</li>
<li id="footnote-9">
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/simple.py">examples/simple.py</a> <a href="#fr-9-1">‚Ü©</a></p>
</li>
<li id="footnote-10">
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/nested.py">examples/nested.py</a> <a href="#fr-10-1">‚Ü©</a></p>
</li>
<li id="footnote-11">
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/newtype.py">examples/newtype.py</a> <a href="#fr-11-1">‚Ü©</a></p>
</li>
<li id="footnote-12">
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/any.py">examples/any.py</a> <a href="#fr-12-1">‚Ü©</a></p>
</li>
<li id="footnote-13">
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/literal.py">examples/literal.py</a> <a href="#fr-13-1">‚Ü©</a></p>
</li>
<li id="footnote-14">
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/generics.py">examples/generics.py</a> <a href="#fr-14-1">‚Ü©</a></p>
</li>
<li id="footnote-15">
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/class_var.py">examples/class_var.py</a> <a href="#fr-15-1">‚Ü©</a></p>
</li>
<li id="footnote-16">
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/init_var.py">examples/init_var.py</a> <a href="#fr-16-1">‚Ü©</a></p>
</li>
<li id="footnote-17">
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/enum34.py">examples/enum34.py</a> <a href="#fr-17-1">‚Ü©</a></p>
</li>
<li id="footnote-18">
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/type_pathlib.py">examples/type_pathlib.py</a> <a href="#fr-18-1">‚Ü©</a></p>
</li>
<li id="footnote-19">
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/type_decimal.py">examples/type_decimal.py</a> <a href="#fr-19-1">‚Ü©</a></p>
</li>
<li id="footnote-20">
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/type_uuid.py">examples/type_uuid.py</a> <a href="#fr-20-1">‚Ü©</a></p>
</li>
<li id="footnote-21">
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/type_datetime.py">examples/type_datetime.py</a> <a href="#fr-21-1">‚Ü©</a></p>
</li>
<li id="footnote-22">
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/type_ipaddress.py">examples/type_ipaddress.py</a> <a href="#fr-22-1">‚Ü©</a></p>
</li>
<li id="footnote-23">
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/type_numpy.py">examples/type_numpy.py</a> <a href="#fr-23-1">‚Ü©</a></p>
</li>
<li id="footnote-24">
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/type_sqlalchemy.py">examples/type_sqlalchemy.py</a> <a href="#fr-24-1">‚Ü©</a></p>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="decorators"><a class="header" href="#decorators">Decorators</a></h1>
<h2 id="serde"><a class="header" href="#serde"><code>@serde</code></a></h2>
<p><code>@serde</code> is a wrapper of <code>@serialize</code> and <code>@deserialize</code> decorators.</p>
<p>This code</p>
<pre><code class="language-python">@serde
class Foo:
    ...
</code></pre>
<p>is equivalent to the following code.</p>
<pre><code class="language-python">@deserialize
@serialize
@dataclass
class Foo:
    ...
</code></pre>
<p><code>@serde</code> decorator does these for you:</p>
<ul>
<li>Add <code>@serialize</code> and <code>@deserialize</code> decorators to a class</li>
<li>Add <code>@dataclass</code> decorator to a class if a class doesn‚Äôt have <code>@dataclass</code></li>
<li>You can pass both (de)serialize attributes to the decorator
<ul>
<li><code>serializer</code> attribute is ignored in <code>@deserialize</code> and <code>deserializer</code> attribute is ignored in <code>@serialize</code></li>
</ul>
</li>
</ul>
<pre><code class="language-python">@serde(serializer=serializer, deserializer=deserializer)
@dataclass
class Foo:
    ...
</code></pre>
<blockquote>
<p><strong>NOTE:</strong> <code>@serde</code> actually works without @dataclass decorator, because it detects and add @dataclass to the declared class automatically. However, mypy will produce <code>Too many arguments</code> or <code>Unexpected keyword argument</code> error. This is due to <a href="https://mypy.readthedocs.io/en/stable/additional_features.html#caveats-known-issues">the mypy limitation</a>.</p>
<pre><code class="language-python">@serde
class Foo:
    ...
</code></pre>
<p>But if you use a PEP681 compliant type checker (e.g. pyright), you don‚Äôt get the type error because pyserde supports <a href="https://peps.python.org/pep-0681/">PEP681 dataclass_transform</a></p>
</blockquote>
<h2 id="serializedeserialize"><a class="header" href="#serializedeserialize"><code>@serialize</code>/<code>@deserialize</code></a></h2>
<p><code>@serialize</code> and <code>@deserialize</code> are used by <code>@serde</code> under the hood. We recommend to use those two decorators in the following cases. Otherwise <code>@serde</code> is recommended.</p>
<ul>
<li>You only need either serialization or deserialization functionality</li>
<li>You want to have different class attributes as below</li>
</ul>
<pre><code class="language-python">@deserialize(rename_all = "snakecase")
@serialize(rename_all = "camelcase")
class Foo:
    ...
</code></pre>
<h2 id="deserializing-class-without-serde"><a class="header" href="#deserializing-class-without-serde">(de)serializing class without <code>@serde</code></a></h2>
<p>pyserde can (de)serialize dataclasses without <code>@serde</code> since v0.10.0. This feature is convenient when you want to use classes declared in external libraries or a type checker doesn‚Äôt work with <code>@serde</code> decorator. See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/plain_dataclass.py">this example</a>.</p>
<p>How does it work? It‚Äôs quite simple that pyserde add <code>@serde</code> decorator if a class doesn‚Äôt has it. It may take for a while for the first API call, but the generated code will be cached internally. So it won‚Äôt be a problem. See the following example to deserialize a class in a third party package.</p>
<pre><code class="language-python">@dataclass
class External:
    ...

to_dict(External()) # works without @serde
</code></pre>
<p>Note that you can‚Äôt specify class attributes e.g. <code>rename_all</code> in this case. If you want to add a class attribute to an external dataclass, there is a technique to do that by extending dataclass. See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/plain_dataclass_class_attribute.py">this example</a>.</p>
<pre><code class="language-python">@dataclass
class External:
    some_value: int

@serde(rename_all="kebabcase")
@dataclass
class Wrapper(External):
    pass
</code></pre>
<h2 id="how-can-i-use-forward-references"><a class="header" href="#how-can-i-use-forward-references">How can I use forward references?</a></h2>
<p>pyserde supports forward references. If you replace a nested class name with with string, pyserde looks up and evaluate the decorator after nested class is defined.</p>
<pre><code class="language-python">from __future__ import annotations # make sure to import annotations

@dataclass
class Foo:
    i: int
    s: str
    bar: Bar  # Bar can be specified although it's declared afterward.

@serde
@dataclass
class Bar:
    f: float
    b: bool

# Evaluate pyserde decorators after `Bar` is defined.
serde(Foo)
</code></pre>
<h2 id="pep563-postponed-evaluation-of-annotations"><a class="header" href="#pep563-postponed-evaluation-of-annotations">PEP563 Postponed Evaluation of Annotations</a></h2>
<p>pyserde supports <a href="https://peps.python.org/pep-0563/">PEP563 Postponed evaluation of annotation</a>.</p>
<pre><code class="language-python">from __future__ import annotations
from serde import serde

@serde
class Foo:
    i: int
    s: str
    f: float
    b: bool

    def foo(self, cls: Foo):  # You can use "Foo" type before it's defined.
        print('foo')
</code></pre>
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/lazy_type_evaluation.py">examples/lazy_type_evaluation.py</a> for complete example.</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="class-attributes"><a class="header" href="#class-attributes">Class Attributes</a></h1>
<p>Class attributes can be specified as arguments in the <code>serialize</code>/<code>deserialize</code> decorators in order to customize the (de)serialization behaviour of the class entirely. If you want to customize a field, please consider using <a href="#field-attributes">Field Attributes</a>.</p>
<h2 id="attributes-offered-by-dataclasses"><a class="header" href="#attributes-offered-by-dataclasses">Attributes offered by dataclasses</a></h2>
<h3 id="frozen"><a class="header" href="#frozen"><strong><code>frozen</code></strong></a></h3>
<p>dataclass <code>frozen</code> class attribute works as expected.</p>
<h3 id="kw_only"><a class="header" href="#kw_only"><strong><code>kw_only</code></strong></a></h3>
<p>New in v0.12.2. dataclass <code>kw_only</code> class attribute works as expected.</p>
<pre><code class="language-python">@serde
@dataclass(kw_only=True)
class Foo:
    i: int
    s: str
    f: float
    b: bool
</code></pre>
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/kw_only.py">examples/kw_only.py</a> for the complete example.</p>
<h2 id="attributes-offered-by-pyserde"><a class="header" href="#attributes-offered-by-pyserde">Attributes offered by pyserde</a></h2>
<h3 id="rename_all"><a class="header" href="#rename_all"><strong><code>rename_all</code></strong></a></h3>
<p><code>rename_all</code> can converts field names into the specified string case. The following example converts camel case field names into snake case names. Case coversion depends on <a href="https://github.com/dmlls/python-casefy">python-casefy</a>. You can find the list of supported cases in <a href="https://dmlls.github.io/python-casefy/api.html">the python-casefy‚Äôs docs</a>.</p>
<pre><code class="language-python">@serde(rename_all = 'camelcase')
class Foo:
    int_field: int
    str_field: str

f = Foo(int_field=10, str_field='foo')
print(to_json(f))
</code></pre>
<p>‚Äúint_field‚Äù is converted to ‚ÄúintField‚Äù and ‚Äústr_field‚Äù is converted to ‚ÄústrField‚Äù.</p>
<pre><code class="language-json">{"intField": 10, "strField": "foo"}
</code></pre>
<blockquote>
<p><strong>NOTE:</strong> If <code>rename_all</code> class attribute and <code>rename</code> field attribute are used at the same time, <code>rename</code> will be prioritized.</p>
<pre><code class="language-python">@serde(rename_all = 'camelcase')
class Foo:
    int_field: int
    str_field: str = field(rename='str-field')

f = Foo(int_field=10, str_field='foo')
print(to_json(f))
</code></pre>
<p>The above code prints</p>
<pre><code>{"intField": 10, "str-field": "foo"}
</code></pre>
</blockquote>
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/rename_all.py">examples/rename_all.py</a> for the complete example.</p>
<h3 id="tagging"><a class="header" href="#tagging"><strong><code>tagging</code></strong></a></h3>
<p>New in v0.7.0. See <a href="#union-representation">Union</a>.</p>
<h3 id="transparent"><a class="header" href="#transparent"><strong><code>transparent</code></strong></a></h3>
<p>When <code>transparent=True</code>, a wrapper class with a single field is (de)serialized as that field, like serde-rs <code>#[serde(transparent)]</code>.</p>
<pre><code class="language-python">@serde(transparent=True)
class UserId:
    value: int

assert to_json(UserId(1)) == "1"
assert from_json(UserId, "1") == UserId(1)
</code></pre>
<p>Constraints:</p>
<ul>
<li>The class must have exactly one <code>init=True</code> field that is not skipped.</li>
<li>Any other dataclass fields must be both <code>init=False</code> and <code>skip=True</code> (e.g. internal cache fields).</li>
</ul>
<h3 id="class_serializer--class_deserializer"><a class="header" href="#class_serializer--class_deserializer"><strong><code>class_serializer</code></strong> / <strong><code>class_deserializer</code></strong></a></h3>
<p>If you want to use a custom (de)serializer at class level, you can pass your (de)serializer object in <code>class_serializer</code> and <code>class_deserializer</code> class attributes. Class custom (de)serializer depends on a python library <a href="https://github.com/beartype/plum">plum</a> which allows multiple method overloading like C++. With plum, you can write robust custom (de)serializer in a quite neat way.</p>
<pre><code class="language-python">class MySerializer:
    @dispatch
    def serialize(self, value: datetime) -&gt; str:
        return value.strftime("%d/%m/%y")

class MyDeserializer:
    @dispatch
    def deserialize(self, cls: Type[datetime], value: Any) -&gt; datetime:
        return datetime.strptime(value, "%d/%m/%y")

@serde(class_serializer=MySerializer(), class_deserializer=MyDeserializer())
class Foo:
    v: datetime
</code></pre>
<p>One big difference from legacy <code>serializer</code> and <code>deserializer</code> is the fact that new <code>class_serializer</code> and <code>class_deserializer</code> are more deeply integrated at the pyserde‚Äôs code generator level. You no longer need to handle Optional, List and Nested dataclass by yourself. Custom class (de)serializer will be used at all level of (de)serialization so you can extend pyserde to support third party types just like builtin types.</p>
<p>Also,</p>
<ul>
<li>If both field and class serializer specified, field serializer is prioritized</li>
<li>If both legacy and new class serializer specified, new class serializer is prioritized</li>
</ul>
<blockquote>
<p>üí° Tip: If you implements multiple <code>serialize</code> methods, you will receive ‚ÄúRedefinition of unused <code>serialize</code>‚Äù warning from type checker. In such case, try using <code>plum.overload</code> and <code>plum.dispatch</code> to workaround it. See <a href="https://beartype.github.io/plum/integration.html">plum‚Äôs documentation</a> for more information.</p>
<pre><code class="language-python">from plum import dispatch, overload

class Serializer:
   # use @overload
   @overload
   def serialize(self, value: int) -&gt; Any:
       return str(value)

   # use @overload
   @overload
   def serialize(self, value: float) -&gt; Any:
       return int(value)

   # Add method time and make sure to add @dispatch. Plum will do all the magic to erase warnings from type checker.
   @dispatch
   def serialize(self, value: Any) -&gt; Any:
       ...
</code></pre>
</blockquote>
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/custom_class_serializer.py">examples/custom_class_serializer.py</a> for complete example.</p>
<p>New in v0.13.0.</p>
<h3 id="serializer--deserializer"><a class="header" href="#serializer--deserializer"><strong><code>serializer</code></strong> / <strong><code>deserializer</code></strong></a></h3>
<blockquote>
<p><strong>NOTE:</strong> Deprecated since v0.13.0. Consider using <code>class_serializer</code> and <code>class_deserializer</code>.</p>
</blockquote>
<p>If you want to use a custom (de)serializer at class level, you can pass your (de)serializer methods n <code>serializer</code> and <code>deserializer</code> class attributes.</p>
<pre><code class="language-python">def serializer(cls, o):
    if cls is datetime:
        return o.strftime('%d/%m/%y')
    else:
        raise SerdeSkip()

def deserializer(cls, o):
    if cls is datetime:
        return datetime.strptime(o, '%d/%m/%y')
    else:
        raise SerdeSkip()

@serde(serializer=serializer, deserializer=deserializer)
class Foo:
    a: datetime
</code></pre>
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/custom_legacy_class_serializer.py">examples/custom_legacy_class_serializer.py</a> for complete example.</p>
<h3 id="type_check"><a class="header" href="#type_check"><strong><code>type_check</code></strong></a></h3>
<p>New in v0.9.0. See <a href="#type-checking">Type Check</a>.</p>
<h3 id="serialize_class_var"><a class="header" href="#serialize_class_var"><strong><code>serialize_class_var</code></strong></a></h3>
<p>New in v0.9.8. Since <code>dataclasses.fields</code> doesn‚Äôt include a class variable <sup class="footnote-reference" id="fr-1-1-1"><a href="#footnote-1-1">1</a></sup>, pyserde doesn‚Äôt serialize class variable as default. This option allows a field of <code>typing.ClassVar</code> to be serialized.</p>
<pre><code class="language-python">@serde(serialize_class_var=True)
class Foo:
    a: ClassVar[int] = 10
</code></pre>
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/class_var.py">examples/class_var.py</a> for complete example.</p>
<h3 id="deny_unknown_fields"><a class="header" href="#deny_unknown_fields"><strong><code>deny_unknown_fields</code></strong></a></h3>
<p>New in v0.22.0, the <code>deny_unknown_fields</code> option in the pyserde decorator allows you to enforce strict field validation during deserialization. When this option is enabled, any fields in the input data that are not defined in the target class will cause deserialization to fail with a <code>SerdeError</code>.</p>
<p>Consider the following example:</p>
<pre><code class="language-python">@serde(deny_unknown_fields=True)
class Foo:
    a: int
    b: str
</code></pre>
<p>With <code>deny_unknown_fields=True</code>, attempting to deserialize data containing fields beyond those defined (a and b in this case) will raise an error. For instance:</p>
<pre><code>from_json(Foo, '{"a": 10, "b": "foo", "c": 100.0, "d": true}')
</code></pre>
<p>This will raise a <code>SerdeError</code> since fields c and d are not recognized members of Foo.</p>
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/deny_unknown_fields.py">examples/deny_unknown_fields.py</a> for complete example.</p>
<hr>
<ol class="footnote-definition">
<li id="footnote-1-1">
<p><a href="https://docs.python.org/3/library/dataclasses.html#dataclasses.fields">dataclasses.fields</a> <a href="#fr-1-1-1">‚Ü©</a></p>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="field-attributes"><a class="header" href="#field-attributes">Field Attributes</a></h1>
<p>Field attributes are options to customize (de)serialization behaviour for a field of a dataclass.</p>
<h2 id="attributes-offered-by-dataclasses-1"><a class="header" href="#attributes-offered-by-dataclasses-1">Attributes offered by dataclasses</a></h2>
<h3 id="default--default_factory"><a class="header" href="#default--default_factory"><strong><code>default</code></strong> / <strong><code>default_factory</code></strong></a></h3>
<p><code>default</code> and <code>default_factory</code> work as expected. If a field has <code>default</code> or <code>default_factory</code> attribute, it behaves like an optional field. If the field is found in the data, the value is fetched from the data and set in the deserialized object. If the field is not found in the data, the specified default value is set in the deserialized object.</p>
<pre><code class="language-python">class Foo:
    a: int = 10
    b: int = field(default=10)  # same as field "a"
    c: dict[str, int] = field(default_factory=dict)

print(from_dict(Foo, {}))  # prints Foo(a=10, b=10, c={})
</code></pre>
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/default.py">examples/default.py</a> for the complete example.</p>
<h3 id="classvar"><a class="header" href="#classvar"><strong><code>ClassVar</code></strong></a></h3>
<p><code>dataclasses.ClassVar</code> is a class variable for the dataclasses. Since dataclass treats ClassVar as pseudo-field and <code>dataclasses.field</code> doesn‚Äôt pick ClassVar, pyserde doesn‚Äôt (de)serialize ClassVar fields as a default behaviour. If you want to serialize ClassVar fields, consider using <a href="#serialize_class_var">serialize_class_var</a> class attribute.</p>
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/class_var.py">examples/class_var.py</a> for the complete example.</p>
<h2 id="attributes-offered-by-pyserde-1"><a class="header" href="#attributes-offered-by-pyserde-1">Attributes offered by pyserde</a></h2>
<p>Field attributes can be specified through <code>serde.field</code> or <code>dataclasses.field</code>. We recommend to use <code>serde.field</code> because it‚Äôs shorter and type check works.
Here is an example specifying <code>rename</code> attribute in both <code>serde.field</code> and <code>dataclasses.field</code>.</p>
<pre><code class="language-python">@serde.serde
class Foo:
    a: str = serde.field(rename="A")
    b: str = dataclasses.field(metadata={"serde_rename"="B"})
</code></pre>
<h3 id="rename"><a class="header" href="#rename"><strong><code>rename</code></strong></a></h3>
<p><code>rename</code> is used to rename field name during (de)serialization. This attribute is convenient when you want to use a python keyword in field name. For example, this code renames field name <code>id</code> to <code>ID</code>.</p>
<pre><code class="language-python">@serde
class Foo:
    id: int = field(rename="ID")
</code></pre>
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/rename.py">examples/rename.py</a> for the complete example.</p>
<h3 id="skip"><a class="header" href="#skip"><strong><code>skip</code></strong></a></h3>
<p><code>skip</code> is used to skip (de)serialization of the field with this attribute.</p>
<pre><code class="language-python">@serde
class Resource:
    name: str
    hash: str
    metadata: dict[str, str] = field(default_factory=dict, skip=True)
</code></pre>
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/skip.py">examples/skip.py</a> for the complete example.</p>
<h3 id="skip_if"><a class="header" href="#skip_if"><strong><code>skip_if</code></strong></a></h3>
<p><code>skip</code> is used to skip (de)serialization of the field if the predicate function returns <code>True</code>.</p>
<pre><code class="language-python">@serde
class World:
    buddy: str = field(default='', skip_if=lambda v: v == 'Pikachu')
</code></pre>
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/skip.py">examples/skip.py</a> for the complete example.</p>
<h3 id="skip_if_false"><a class="header" href="#skip_if_false"><strong><code>skip_if_false</code></strong></a></h3>
<p><code>skip</code> is used to skip (de)serialization of the field if the field evaluates to <code>False</code>. For example, this code skip (de)serializing if <code>enemies</code> is empty.</p>
<pre><code class="language-python">@serde
class World:
    enemies: list[str] = field(default_factory=list, skip_if_false=True)
</code></pre>
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/skip.py">examples/skip.py</a> for the complete example.</p>
<h3 id="skip_if_default"><a class="header" href="#skip_if_default"><strong><code>skip_if_default</code></strong></a></h3>
<p><code>skip</code> is used to skip (de)serialization of the field if the field is equivalent to its default value. For example, this code skip (de)serializing if <code>town</code> is <code>Masara Town</code>.</p>
<pre><code class="language-python">@serde
class World:
    town: str = field(default='Masara Town', skip_if_default=True)
</code></pre>
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/skip.py">examples/skip.py</a> for the complete example.</p>
<h3 id="alias"><a class="header" href="#alias"><strong><code>alias</code></strong></a></h3>
<p>You can set aliases for field names. Alias only works for deserialization.</p>
<pre><code class="language-python">@serde
class Foo:
    a: str = field(alias=["b", "c"])
</code></pre>
<p><code>Foo</code> can be deserialized from either <code>{"a": "..."}</code>, <code>{"b": "..."}</code> or <code>{"c": "..."}</code>.</p>
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/alias.py">examples/alias.py</a> for complete example.</p>
<h2 id="serializerdeserializer"><a class="header" href="#serializerdeserializer"><strong><code>serializer</code></strong>/<strong><code>deserializer</code></strong></a></h2>
<p>Sometimes you want to customize (de)serializer for a particular field, such as</p>
<ul>
<li>You want to serialize datetime into a different format</li>
<li>You want to serialize a type in a third party package</li>
</ul>
<p>In the following example, field <code>a</code> is serialized into <code>"2021-01-01T00:00:00"</code> by the default serializer for <code>datetime</code>, whereas field <code>b</code> is serialized into <code>"01/01/21"</code> by the custom serializer.</p>
<pre><code class="language-python">@serde
class Foo:
    a: datetime
    b: datetime = field(serializer=lambda x: x.strftime('%d/%m/%y'), deserializer=lambda x: datetime.strptime(x, '%d/%m/%y'))
</code></pre>
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/custom_field_serializer.py">examples/custom_field_serializer.py</a> for the complete example.</p>
<h2 id="flatten"><a class="header" href="#flatten"><strong><code>flatten</code></strong></a></h2>
<p>You can flatten the fields of the nested structure.</p>
<pre><code class="language-python">@serde
class Bar:
    c: float
    d: bool

@serde
class Foo:
    a: int
    b: str
    bar: Bar = field(flatten=True)
</code></pre>
<p>Bar‚Äôs c, d fields are deserialized as if they are defined in Foo. So you will get <code>{"a":10,"b":"foo","c":100.0,"d":true}</code> if you serialize <code>Foo</code> into JSON.</p>
<p>See <a href="https://github.com/yukinarit/pyserde/blob/main/examples/flatten.py">examples/flatten.py</a> for complete example.</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="union-representation"><a class="header" href="#union-representation">Union Representation</a></h1>
<p><code>pyserde</code>&gt;=0.7 offers attributes to control how Union is (de)serialized. This concept is the very same as the one in <a href="https://serde.rs/enum-representations.html">serde-rs</a>. Note these representations only apply to the dataclass, non dataclass objects are (de)serialized with <code>Untagged</code> always.</p>
<h2 id="untagged"><a class="header" href="#untagged"><code>Untagged</code></a></h2>
<p>This is the default Union representation for pyserde&lt;0.7. Given these dataclasses,</p>
<pre><code class="language-python">@serde
class Bar:
    b: int

@serde
class Baz:
    b: int

@serde(tagging=Untagged)
class Foo:
    a: Union[Bar, Baz]
</code></pre>
<p>Note that <code>Bar</code> and <code>Baz</code> have the same field name and type. If you serialize <code>Foo(Baz(10))</code> into dict, you get <code>{"a": {"b": 10}}</code>. But if you deserialize <code>{"a": {"b": 10}}</code>, you get <code>Foo(Bar(10))</code> instead of <code>Foo(Baz(10))</code>. This means pyserde <strong>can‚Äôt correctly (de)serialize dataclasses of Union with <code>Untagged</code></strong>. This is why pyserde offers other kinds of union representation options.</p>
<h2 id="externaltagging"><a class="header" href="#externaltagging"><code>ExternalTagging</code></a></h2>
<p>This is the default Union representation since 0.7. A class declaration with <code>ExternalTagging</code> looks like below. If you serialize <code>Foo(Baz(10))</code> into dict, you get <code>{"a": {"Baz": {"b": 10}}}</code> and you can deserialize it back to <code>Foo(Baz(10))</code>.</p>
<pre><code class="language-python">@serde(tagging=ExternalTagging)
class Foo:
    a: Union[Bar, Baz]
</code></pre>
<blockquote>
<p><strong>NOTE:</strong> Non dataclass objects are alreays (de)serialized with <code>Untagged</code> regardless of <code>tagging</code> attribute because there is no information which can be used for tag. The drawback of <code>Untagged</code> is pyserde can‚Äôt correctly deserialize certain types. For example, <code>Foo({1, 2, 3})</code> of below class is serialized into <code>{"a": [1, 2, 3]}</code>, but you get <code>Foo([1, 2, 3])</code> by deserializing.</p>
<pre><code class="language-python">@serde(tagging=ExternalTagging)
class Foo:
   a: Union[list[int], set[int]]
</code></pre>
</blockquote>
<h2 id="internaltagging"><a class="header" href="#internaltagging"><code>InternalTagging</code></a></h2>
<p>A class declaration with <code>InternalTagging</code> looks like below. If you serialize <code>Foo(Baz(10))</code> into dict, you will get <code>{"a": {"type": "Baz", "b": 10}}</code> and you can deserialize it back to <code>Foo(Baz(10))</code>. <code>type</code> tag is encoded inside the <code>Baz</code>‚Äôs dictionary.</p>
<pre><code class="language-python">@serde(tagging=InternalTagging("type"))
class Foo:
    a: Union[Bar, Baz]
</code></pre>
<h2 id="adjacenttagging"><a class="header" href="#adjacenttagging"><code>AdjacentTagging</code></a></h2>
<p>A class declaration with <code>AdjacentTagging</code> looks like below. If you serialize <code>Foo(Baz(10))</code> into dict, you will get <code>{"a": {"type": "Baz", "content": {"b": 10}}}</code> and you can deserialize it back to <code>Foo(Baz(10))</code>. <code>type</code> tag is encoded inside <code>Baz</code>‚Äôs dictionary and <code>Baz</code>s fields are encoded inside <code>content</code>.</p>
<pre><code class="language-python">@serde(tagging=AdjacentTagging("type", "content"))
class Foo:
    a: Union[Bar, Baz]
</code></pre>
<h2 id="deserializing-union-types-directly"><a class="header" href="#deserializing-union-types-directly">(de)serializing Union types directly</a></h2>
<p>New in v0.12.0.</p>
<p>Passing Union types directly in (de)serialize APIs (e.g. to_json, from_json) was partially supported prior to v0.12, but the union type was always treated as untagged. Users had no way to change the union tagging. The following example code wasn‚Äôt able to correctly deserialize into <code>Bar</code> due to untagged.</p>
<pre><code class="language-python">@serde
class Foo:
    a: int

@serde
class Bar:
    a: int

bar = Bar(10)
s = to_json(bar)
print(s)
# prints {"a": 10}
print(from_json(Union[Foo, Bar], s))
# prints Foo(10)
</code></pre>
<p>Since v0.12.0, pyserde can handle union that‚Äôs passed in (de)serialize APIs a bit nicely. The union type is treated as externally tagged as that is the default tagging in pyserde. So the above example can correctly (de)serialize as <code>Bar</code>.</p>
<pre><code class="language-python">@serde
class Foo:
    a: int

@serde
class Bar:
    a: int

bar = Bar(10)
s = to_json(bar, cls=Union[Foo, Bar])
print(s)
# prints {"Bar" {"a": 10}}
print(from_json(Union[Foo, Bar], s))
# prints Bar(10)
</code></pre>
<p>Also you can change the tagging using <code>serde.InternalTagging</code>, <code>serde.AdjacentTagging</code> and <code>serde.Untagged</code>.</p>
<p>Now try to change the tagging for the above example. You need to pass a new argument <code>cls</code> in <code>to_json</code>. Also union class must be wrapped in either <code>InternalTagging</code>, <code>AdjacentTaging</code> or <code>Untagged</code> with required parameters.</p>
<ul>
<li>InternalTagging
<pre><code class="language-python">from serde import InternalTagging

s = to_json(bar, cls=InternalTagging("type", Union[Foo, Bar]))
print(s)
# prints {"type": "Bar", "a": 10}
print(from_json(InternalTagging("type", Union[Foo, Bar]), s))
# prints Bar(10)
</code></pre>
</li>
<li>AdjacentTagging
<pre><code class="language-python">from serde import AdjacentTagging

s = to_json(bar, cls=AdjacentTagging("type", "content", Union[Foo, Bar]))
print(s)
# prints {"type": "Bar", "content": {"a": 10}}
print(from_json(AdjacentTagging("type", "content", Union[Foo, Bar]), s))
# prints Bar(10)
</code></pre>
</li>
<li>Untagged
<pre><code class="language-python">from serde import Untagged

s = to_json(bar, cls=Untagged(Union[Foo, Bar]))
print(s)
# prints {"a": 10}
print(from_json(Untagged(Union[Foo, Bar]), s))
# prints Foo(10)
</code></pre>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="type-checking"><a class="header" href="#type-checking">Type Checking</a></h1>
<p>pyserde offers runtime type checking since v0.9. It was completely reworked at v0.14 using <a href="https://github.com/beartype/beartype">beartype</a> and it became more sophisticated and reliable. It is highly recommended to enable type checking always as it helps writing type-safe and robust programs.</p>
<h2 id="strict"><a class="header" href="#strict"><code>strict</code></a></h2>
<p>Strict type checking is to check every field value against the declared type during (de)serialization and object construction. This is the default type check mode since v0.14. What will happen with this mode is if you declare a class with <code>@serde</code> decorator without any class attributes, <code>@serde(type_check=strict)</code> is assumed and strict type checking is enabled.</p>
<pre><code class="language-python">@serde
class Foo:
    s: str
</code></pre>
<p>If you call <code>Foo</code> with wrong type of object,</p>
<pre><code class="language-python">foo = Foo(10)
</code></pre>
<p>you get an error</p>
<pre><code class="language-python">beartype.roar.BeartypeCallHintParamViolation: Method __main__.Foo.__init__() parameter s=10 violates type hint &lt;class 'str'&gt;, as int 10 not instance of str.
</code></pre>
<blockquote>
<p><strong>NOTE:</strong> beartype exception instead of SerdeError is raised from constructor because beartype does not provide post validation hook as of Feb. 2024.</p>
</blockquote>
<p>similarly, if you call (de)serialize APIs with wrong type of object,</p>
<pre><code class="language-python">print(to_json(foo))
</code></pre>
<p>again you get an error</p>
<pre><code class="language-python">serde.compat.SerdeError: Method __main__.Foo.__init__() parameter s=10 violates type hint &lt;class 'str'&gt;, as int 10 not instance of str.
</code></pre>
<blockquote>
<p><strong>NOTE:</strong> There are several caveats regarding type checks by beartype.</p>
<ol>
<li>beartype can not validate on mutated properties</li>
</ol>
<p>The following code mutates the property ‚Äús‚Äù at the bottom. beartype can not detect this case.</p>
<pre><code class="language-python">@serde
class Foo
    s: str

f = Foo("foo")
f.s = 100
</code></pre>
<ol start="2">
<li>beartype can not validate every one of elements in containers. This is not a bug. This is desgin principle of beartype. See [Does beartype actually do anything?](https://beartype.readthedocs.io/en/latest/faq/#faq-o1].</li>
</ol>
<pre><code></code></pre>
</blockquote>
<h2 id="coerce"><a class="header" href="#coerce"><code>coerce</code></a></h2>
<p>Type coercing automatically converts a value into the declared type during (de)serialization. If the value is incompatible e.g. value is ‚Äúfoo‚Äù and type is int, pyserde raises an <code>SerdeError</code>.</p>
<pre><code class="language-python">@serde(type_check=coerce)
class Foo
    s: str

foo = Foo(10)
# pyserde automatically coerce the int value 10 into "10".
# {"s": "10"} will be printed.
print(to_json(foo))
</code></pre>
<h2 id="disabled"><a class="header" href="#disabled"><code>disabled</code></a></h2>
<p>This is the default behavior until pyserde v0.8.3 and v0.9.x. No type coercion or checks are run. Even if a user puts a wrong value, pyserde doesn‚Äôt complain anything.</p>
<pre><code class="language-python">@serde
class Foo
    s: str

foo = Foo(10)
# pyserde doesn't complain anything. {"s": 10} will be printed.
print(to_json(foo))
</code></pre>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="extending-pyserde"><a class="header" href="#extending-pyserde">Extending pyserde</a></h1>
<p>pyserde offers three ways to extend pyserde to support non builtin types.</p>
<h2 id="custom-field-deserializer"><a class="header" href="#custom-field-deserializer">Custom field (de)serializer</a></h2>
<p>See <a href="#serializerdeserializer">custom field serializer</a>.</p>
<blockquote>
<p>üí° Tip: wrapping <code>serde.field</code> with your own field function makes</p>
<pre><code class="language-python">import serde

def field(*args, **kwargs):
    serde.field(*args, **kwargs, serializer=str)

@serde
class Foo:
    a: int = field(default=0)  # Configuring field serializer
</code></pre>
</blockquote>
<h2 id="custom-class-deserializer"><a class="header" href="#custom-class-deserializer">Custom class (de)serializer</a></h2>
<p>See <a href="#class_serializer--class_deserializer">custom class serializer</a>.</p>
<h2 id="custom-global-deserializer"><a class="header" href="#custom-global-deserializer">Custom global (de)serializer</a></h2>
<p>You apply the custom (de)serialization for entire codebase by registering class (de)serializer by <code>add_serializer</code> and <code>add_deserializer</code>. Registered class (de)serializers are stacked in pyserde‚Äôs global space and automatically used for all the pyserde classes.</p>
<p>e.g. Implementing custom (de)serialization for <code>datetime.timedelta</code> using <a href="https://pypi.org/project/isodate/">isodate</a> package.</p>
<p>Here is the code of registering class (de)serializer for <code>datetime.timedelta</code>. This package is actually published in PyPI as <a href="https://pypi.org/project/pyserde-timedelta/">pyserde-timedelta</a>.</p>
<pre><code class="language-python">from datetime import timedelta
from plum import dispatch
from typing import Type, Any
import isodate
import serde

class Serializer:
    @dispatch
    def serialize(self, value: timedelta) -&gt; Any:
        return isodate.duration_isoformat(value)

class Deserializer:
    @dispatch
    def deserialize(self, cls: Type[timedelta], value: Any) -&gt; timedelta:
        return isodate.parse_duration(value)

def init() -&gt; None:
    serde.add_serializer(Serializer())
    serde.add_deserializer(Deserializer())
</code></pre>
<p>Users of this package can reuse custom (de)serialization functionality for <code>datetime.timedelta</code> just by calling <code>serde_timedelta.init()</code>.</p>
<pre><code class="language-python">import serde_timedelta
from serde import serde
from serde.json import to_json, from_json
from datetime import timedelta

serde_timedelta.init()

@serde
class Foo:
    a: timedelta

f = Foo(timedelta(hours=10))
json = to_json(f)
print(json)
print(from_json(Foo, json))
</code></pre>
<p>and you get <code>datetime.timedelta</code> to be serialized in ISO 8601 duration format!</p>
<pre><code class="language-bash">{"a":"PT10H"}
Foo(a=datetime.timedelta(seconds=36000))
</code></pre>
<blockquote>
<p>üí° Tip: You can register as many class (de)serializer as you want. This means you can use as many pyserde extensions as you want.
Registered (de)serializers are stacked in the memory. A (de)serializer can be overridden by another (de)serializer.</p>
<p>e.g. If you register 3 custom serializers in this order, the first serializer will completely overridden by the 3rd one. 2nd one works because it is implemented for a different type.</p>
<ol>
<li>Register Serializer for <code>int</code></li>
<li>Register Serializer for <code>float</code></li>
<li>Register Serializer for <code>int</code></li>
</ol>
</blockquote>
<p>New in v0.13.0.</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="faq"><a class="header" href="#faq">FAQ</a></h1>
<h2 id="how-can-i-see-the-code-generated-by-pyserde"><a class="header" href="#how-can-i-see-the-code-generated-by-pyserde">How can I see the code generated by pyserde?</a></h2>
<p>pyserde provides <code>inspect</code> submodule that works as commandline:</p>
<pre><code>python -m serde.inspect &lt;PATH_TO_FILE&gt; &lt;CLASS&gt;
</code></pre>
<p>e.g. in pyserde project</p>
<pre><code>cd pyserde
uv sync
uv run python -m serde.inspect examples/simple.py Foo
</code></pre>
<p>Output</p>
<pre><code class="language-python">Loading simple.Foo from examples.

==================================================
                       Foo
==================================================

--------------------------------------------------
          Functions generated by pyserde
--------------------------------------------------
def to_iter(obj, reuse_instances=True, convert_sets=False):
    if reuse_instances is Ellipsis:
        reuse_instances = True
    if convert_sets is Ellipsis:
        convert_sets = False
    if not is_dataclass(obj):
        return copy.deepcopy(obj)

    Foo = serde_scope.types["Foo"]
    res = []
    res.append(obj.i)
    res.append(obj.s)
    res.append(obj.f)
    res.append(obj.b)
    return tuple(res)
...
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr-ef4e11c1.min.js"></script>
        <script src="mark-09e88c2c.min.js"></script>
        <script src="searcher-c2a407aa.js"></script>

        <script src="clipboard-1626706a.min.js"></script>
        <script src="highlight-abc7f01d.js"></script>
        <script src="book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>


    </div>
    </body>
</html>
