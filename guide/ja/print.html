<!DOCTYPE HTML>
<html lang="ja" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>pyserde documentation</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">pyserde documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/yukinarit/pyserde" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p><code>pyserde</code>ã¯<a href="https://docs.python.org/3/library/dataclasses.html">dataclasses</a>ãƒ™ãƒ¼ã‚¹ã®ã‚·ãƒ³ãƒ—ãƒ«ã§å¼·åŠ›ãªã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã€ã‚¯ãƒ©ã‚¹ã‚’JSONã‚„YAMLç­‰ã®æ§˜ã€…ãªãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«ç°¡å˜ã«åŠ¹ç‡çš„ã«å¤‰æ›å¯èƒ½ã«ãªã‚Šã¾ã™ã€‚</p>
<p>ã‚¯ãƒ©ã‚¹ã«<code>@serde</code>ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã‚’ä»˜ã‘ã€<a href="https://peps.python.org/pep-0484/">PEP484</a>å½¢å¼ã§ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«å‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã¾ã™ã€‚</p>
<pre><code class="language-python">from serde import serde

@serde
class Foo:
    i: int
    s: str
    f: float
    b: bool
</code></pre>
<p>ã™ã‚‹ã¨ã€<code>Foo</code>ã‚¯ãƒ©ã‚¹ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«JSONã«ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºå‡ºæ¥ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
<pre><code class="language-python">&gt;&gt;&gt; from serde.json import to_json
&gt;&gt;&gt; to_json(Foo(i=10, s='foo', f=100.0, b=True))
'{"i":10,"s":"foo","f":100.0,"b":true}'
</code></pre>
<p>ã¾ãŸã€JSONã‹ã‚‰<code>Foo</code>ã‚¯ãƒ©ã‚¹ã«ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã‚‚å‡ºæ¥ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
<pre><code class="language-python">&gt;&gt;&gt; from serde.json import from_json
&gt;&gt;&gt; from_json(Foo, '{"i": 10, "s": "foo", "f": 100.0, "b": true}')
Foo(i=10, s='foo', f=100.0, b=True)
</code></pre>
<h2 id="next-steps"><a class="header" href="#next-steps">Next Steps</a></h2>
<ul>
<li><a href="getting-started.html">Getting started</a></li>
<li><a href="https://yukinarit.github.io/pyserde/api/serde.html">API Reference</a></li>
<li><a href="https://github.com/yukinarit/pyserde/tree/main/examples">Examples</a></li>
<li><a href="faq.html">FAQ</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="getting-started"><a class="header" href="#getting-started">Getting Started</a></h1>
<h2 id="ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"><a class="header" href="#ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«">ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</a></h2>
<p>PyPIã‹ã‚‰pyserdeã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚pyserdeã«ã¯Python&gt;=3.9ãŒå¿…è¦ã§ã™ã€‚</p>
<pre><code>pip install pyserde
</code></pre>
<p>poetryã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚</p>
<pre><code>poetry add pyserde
</code></pre>
<p>JSONã¨Pickleä»¥å¤–ã®ãƒ‡ãƒ¼ã‚¿å½¢å¼ã‚’æ‰±ã†å ´åˆã¯ã€è¿½åŠ ã®ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚<br />
é©åˆ‡ãªãƒ‡ãƒ¼ã‚¿å½¢å¼ã§å‹•ä½œã™ã‚‹ã«ã¯ã€<code>msgpack</code>ã€<code>toml</code>ã€<code>yaml</code> ã®è¿½åŠ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚<br />
ä½¿ç”¨ã—ãªã„å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—ã—ã¦æ§‹ã„ã¾ã›ã‚“ã€‚<br />
ä¾‹ãˆã°ã€Tomlã¨YAMLã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¾ã™ã€‚</p>
<pre><code>pip install "pyserde[toml,yaml]"
</code></pre>
<p>poetryã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆ</p>
<pre><code>poetry add pyserde -E toml -E yaml
</code></pre>
<p>ä¸€åº¦ã«ã™ã¹ã¦ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å ´åˆ</p>
<pre><code>pip install "pyserde[all]"
</code></pre>
<p>poetryã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆ</p>
<pre><code>poetry add pyserde -E all
</code></pre>
<p>åˆ©ç”¨å¯èƒ½ãªè¿½åŠ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸</p>
<ul>
<li><code>all</code>ï¼š<code>msgpack</code>ã€<code>toml</code>ã€<code>yaml</code>ã€<code>numpy</code>ã€<code>orjson</code>ã€<code>sqlalchemy</code> ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</li>
<li><code>msgpack</code>ï¼š<a href="https://github.com/msgpack/msgpack-python">msgpack</a> ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</li>
<li><code>toml</code>ï¼š<a href="https://github.com/hukkin/tomli">tomli</a> ã¨ <a href="https://github.com/hukkin/tomli-w">tomli-w</a> ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
<ul>
<li>æ³¨è¨˜ï¼špython 3.11ä»¥é™ã¯ <a href="https://docs.python.org/3/library/tomllib.html">tomllib</a> ã‚’ä½¿ç”¨</li>
</ul>
</li>
<li><code>yaml</code>ï¼š<a href="https://github.com/yaml/pyyaml">pyyaml</a> ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</li>
<li><code>numpy</code>ï¼š<a href="https://github.com/numpy/numpy">numpy</a> ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</li>
<li><code>orjson</code>ï¼š<a href="https://github.com/ijl/orjson">orjson</a> ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</li>
<li><code>sqlalchemy</code>ï¼š<a href="https://github.com/sqlalchemy/sqlalchemy">sqlalchemy</a> ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</li>
</ul>
<h2 id="æœ€åˆã®pyserdeã‚¯ãƒ©ã‚¹ã‚’å®šç¾©"><a class="header" href="#æœ€åˆã®pyserdeã‚¯ãƒ©ã‚¹ã‚’å®šç¾©">æœ€åˆã®pyserdeã‚¯ãƒ©ã‚¹ã‚’å®šç¾©</a></h2>
<p>pyserdeã®<code>@serde</code>ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¦ã‚¯ãƒ©ã‚¹ã‚’å®šç¾©ã—ã¾ã™ã€‚<br />
ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åãŒ <code>pyserde</code> ã§ã¯ãªã <code>serde</code> ã§ã‚ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚<br />
<code>pyserde</code>ã¯æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®<code>dataclasses</code>ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«å¤§ããä¾å­˜ã—ã¦ã„ã¾ã™ã€‚<br />
ãã®ãŸã‚ã€dataclassã«æ…£ã‚Œã¦ã„ãªã„å ´åˆã¯ã¾ãš<a href="https://docs.python.org/3/library/dataclasses.html">dataclassesã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>ã‚’èª­ã‚€ã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚</p>
<pre><code class="language-python">from serde import serde

@serde
class Foo:
    i: int
    s: str
    f: float
    b: bool
</code></pre>
<p>ã‚¯ãƒ©ã‚¹ãŒPythonã‚¤ãƒ³ã‚¿ãƒ—ãƒªã‚¿ã«ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹ã¨ã€pyserdeã¯<code>@serde</code>ã«ã‚ˆã£ã¦ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã«å¿…è¦ãªãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”Ÿæˆã—ã¾ã™ã€‚<br />
ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã¯ä¸€åº¦ã ã‘è¡Œã‚ã‚Œã€ã‚¯ãƒ©ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹éš›ã«ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚<br />
ã“ã‚Œã«ã‚ˆã‚Šã€ã‚¯ãƒ©ã‚¹ã¯pyserdeãŒã‚µãƒãƒ¼ãƒˆã™ã‚‹ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿å½¢å¼ã§ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºãŠã‚ˆã³ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚</p>
<blockquote>
<p><strong>æ³¨è¨˜ï¼š</strong> ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã¾ãŸã¯ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã®æ©Ÿèƒ½ã®ã¿ãŒå¿…è¦ãªå ´åˆã€<code>@serde</code>ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã®ä»£ã‚ã‚Šã«<code>@serialize</code>ã‚„<code>@deserialize</code>ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚</p>
<p>ä¾‹ï¼šã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã®ã¿ã‚’è¡Œã†å ´åˆã€<code>@serialize</code>ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚ã—ã‹ã—ã€<code>Foo</code>ã®ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºAPIï¼ˆä¾‹ï¼š<code>from_json</code>ï¼‰ã‚’å‘¼ã³å‡ºã™ã¨ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ã€‚</p>
<pre><code class="language-python">from serde import serialize

@serialize
class Foo:
    i: int
    s: str
    f: float
    b: bool
</code></pre>
</blockquote>
<h2 id="pep585ã¨pep604"><a class="header" href="#pep585ã¨pep604">PEP585ã¨PEP604</a></h2>
<p>python&gt;=3.9ç”¨ã®<a href="https://www.python.org/dev/peps/pep-0585/">PEP585</a>ã‚¹ã‚¿ã‚¤ãƒ«ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã€python&gt;=3.10ç”¨ã®<a href="https://www.python.org/dev/peps/pep-0604/">PEP604</a> Unionã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚<br />
PEP585ã¨PEP604ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€pyserdeã‚¯ãƒ©ã‚¹ã‚’ãã‚Œã„ã«æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<pre><code class="language-python">@serde
class Foo:
    a: int
    b: list[str]
    c: tuple[int, float, str, bool]
    d: dict[str, list[tuple[str, int]]]
    e: str | None
</code></pre>
<h2 id="pyserdeã‚¯ãƒ©ã‚¹ã®ä½¿ç”¨"><a class="header" href="#pyserdeã‚¯ãƒ©ã‚¹ã®ä½¿ç”¨">pyserdeã‚¯ãƒ©ã‚¹ã®ä½¿ç”¨</a></h2>
<p>æ¬¡ã«ã€pyserdeã®ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºAPIã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚<br />
JSONã®å ´åˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¾ã™ã€‚</p>
<pre><code class="language-python">from serde.json import from_json, to_json
</code></pre>
<p><code>to_json</code>ã‚’ä½¿ç”¨ã—ã¦ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’JSONã«ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã—ã¾ã™ã€‚</p>
<pre><code class="language-python">f = Foo(i=10, s='foo', f=100.0, b=True)
print(to_json(f))
</code></pre>
<p><code>from_json</code>ã«<code>Foo</code>ã‚¯ãƒ©ã‚¹ã¨JSONæ–‡å­—åˆ—ã‚’æ¸¡ã—ã¦ã€JSONã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã—ã¾ã™ã€‚</p>
<pre><code class="language-python">s = '{"i": 10, "s": "foo", "f": 100.0, "b": true}'
print(from_json(Foo, s))
</code></pre>
<p>ä»¥ä¸Šã§ã™ï¼<br />
pyserdeã«ã¯ä»–ã«ã‚‚å¤šãã®æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚èˆˆå‘³ãŒã‚ã‚Œã°ã€æ®‹ã‚Šã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ãŠèª­ã¿ãã ã•ã„ã€‚</p>
<blockquote>
<p>ğŸ’¡ ãƒ’ãƒ³ãƒˆï¼šã©ã®ã‚¿ã‚¤ãƒ—ãƒã‚§ãƒƒã‚«ãƒ¼ã‚’ä½¿ç”¨ã™ã¹ãã‹ï¼Ÿ<br />
pyserdeã¯<a href="https://peps.python.org/pep-0681/">PEP681 dataclass_transform</a>ã«ä¾å­˜ã—ã¦ã„ã¾ã™ã€‚<br />
2024å¹´1æœˆç¾åœ¨ã€<a href="https://github.com/python/mypy">mypy</a>ã¯dataclass_transformã‚’å®Œå…¨ã«ã¯ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚<br />
ç§ã®å€‹äººçš„ãªãŠã™ã™ã‚ã¯<a href="https://github.com/microsoft/pyright">pyright</a>ã§ã™ã€‚</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="data-formats"><a class="header" href="#data-formats">Data Formats</a></h1>
<p>pyserdeã¯ã€<code>dict</code>ã€<code>tuple</code>ã€<code>JSON</code>ã€<code>YAML</code>ã€<code>TOML</code>ã€<code>MsgPack</code>ã€<code>Pickle</code> ãªã©ã®ã•ã¾ã–ã¾ãªãƒ‡ãƒ¼ã‚¿å½¢å¼ã‚’ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºãŠã‚ˆã³ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã§ãã¾ã™ã€‚<br />
å„APIã¯è¿½åŠ ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å¼•æ•°ã‚’å–ã‚‹ã“ã¨ãŒã§ãã€ã“ã‚Œã‚‰ã®å¼•æ•°ã¯pyserdeã§ä½¿ç”¨ã•ã‚Œã‚‹ãƒ™ãƒ¼ã‚¹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã¨æ¸¡ã•ã‚Œã¾ã™ã€‚</p>
<p>ä¾‹ãˆã°ã€YAMLã§ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®é †åºã‚’ä¿æŒã—ãŸã„å ´åˆã€<code>serde.yaml.to_yaml</code>ã«<code>sort_key=True</code>ã‚’æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<pre><code class="language-python">serde.yaml.to_yaml(foo, sort_key=True)
</code></pre>
<p><code>sort_key=True</code>ã¯<a href="https://github.com/yukinarit/pyserde/blob/a9f44d52d109144a4c3bb93965f831e91d13960b/serde/yaml.py#L18">yaml.safedump</a>ã«æ¸¡ã•ã‚Œã¾ã™ã€‚</p>
<h2 id="dict"><a class="header" href="#dict">dict</a></h2>
<pre><code class="language-python">&gt;&gt;&gt; from serde import to_dict, from_dict

&gt;&gt;&gt; to_dict(Foo(i=10, s='foo', f=100.0, b=True))
{"i": 10, "s": "foo", "f": 100.0, "b": True}

&gt;&gt;&gt; from_dict(Foo, {"i": 10, "s": "foo", "f": 100.0, "b": True})
Foo(i=10, s='foo', f=100.0, b=True)
</code></pre>
<p>è©³ç´°ã¯<a href="https://yukinarit.github.io/pyserde/api/serde/se.html#to_dict">serde.to_dict</a> / <a href="https://yukinarit.github.io/pyserde/api/serde/de.html#from_dict">serde.from_dict</a>ã‚’ã”è¦§ãã ã•ã„ã€‚</p>
<h2 id="tuple"><a class="header" href="#tuple">tuple</a></h2>
<pre><code class="language-python">&gt;&gt;&gt; from serde import to_tuple, from_tuple

&gt;&gt;&gt; to_tuple(Foo(i=10, s='foo', f=100.0, b=True))
(10, 'foo', 100.0, True)

&gt;&gt;&gt; from_tuple(Foo, (10, 'foo', 100.0, True))
Foo(i=10, s='foo', f=100.0, b=True)
</code></pre>
<p>è©³ç´°ã¯<a href="https://yukinarit.github.io/pyserde/api/serde/se.html#to_tuple">serde.to_tuple</a> / <a href="https://yukinarit.github.io/pyserde/api/serde/de.html#from_tuple">serde.from_tuple</a>ã‚’ã”è¦§ãã ã•ã„ã€‚</p>
<h2 id="json"><a class="header" href="#json">JSON</a></h2>
<pre><code class="language-python">&gt;&gt;&gt; from serde.json import to_json, from_json

&gt;&gt;&gt; to_json(Foo(i=10, s='foo', f=100.0, b=True))
'{"i":10,"s":"foo","f":100.0,"b":true}'

&gt;&gt;&gt; from_json(Foo, '{"i": 10, "s": "foo", "f": 100.0, "b": true}')
Foo(i=10, s='foo', f=100.0, b=True)
</code></pre>
<p>è©³ç´°ã¯<a href="https://yukinarit.github.io/pyserde/api/serde/json.html#to_json">serde.json.to_json</a> / <a href="https://yukinarit.github.io/pyserde/api/serde/json.html#from_json">serde.json.from_json</a>ã‚’ã”è¦§ãã ã•ã„ã€‚</p>
<h2 id="yaml"><a class="header" href="#yaml">Yaml</a></h2>
<pre><code class="language-python">&gt;&gt;&gt; from serde.yaml import from_yaml, to_yaml

&gt;&gt;&gt; to_yaml(Foo(i=10, s='foo', f=100.0, b=True))
b: true
f: 100.0
i: 10
s: foo

&gt;&gt;&gt; from_yaml(Foo, 'b: true\nf: 100.0\ni: 10\ns: foo')
Foo(i=10, s='foo', f=100.0, b=True)
</code></pre>
<p>è©³ç´°ã¯<a href="https://yukinarit.github.io/pyserde/api/serde/yaml.html#to_yaml">serde.yaml.to_yaml</a> / <a href="https://yukinarit.github.io/pyserde/api/serde/yaml.html#from_yaml">serde.yaml.from_yaml</a>ã‚’ã”è¦§ãã ã•ã„ã€‚</p>
<h2 id="toml"><a class="header" href="#toml">Toml</a></h2>
<pre><code class="language-python">&gt;&gt;&gt; from serde.toml from_toml, to_toml

&gt;&gt;&gt; to_toml(Foo(i=10, s='foo', f=100.0, b=True))
i = 10
s = "foo"
f = 100.0
b = true

&gt;&gt;&gt; from_toml(Foo, 'i = 10\ns = "foo"\nf = 100.0\n

b = true')
Foo(i=10, s='foo', f=100.0, b=True)
</code></pre>
<p>è©³ç´°ã¯<a href="https://yukinarit.github.io/pyserde/api/serde/toml.html#to_toml">serde.toml.to_toml</a> / <a href="https://yukinarit.github.io/pyserde/api/serde/toml.html#from_toml">serde.toml.from_toml</a>ã‚’ã”è¦§ãã ã•ã„ã€‚</p>
<h2 id="msgpack"><a class="header" href="#msgpack">MsgPack</a></h2>
<pre><code class="language-python">&gt;&gt;&gt; from serde.msgpack import from_msgpack, to_msgpack

&gt;&gt;&gt; to_msgpack(Foo(i=10, s='foo', f=100.0, b=True))
b'\x84\xa1i\n\xa1s\xa3foo\xa1f\xcb@Y\x00\x00\x00\x00\x00\x00\xa1b\xc3'

&gt;&gt;&gt; from_msgpack(Foo, b'\x84\xa1i\n\xa1s\xa3foo\xa1f\xcb@Y\x00\x00\x00\x00\x00\x00\xa1b\xc3')
Foo(i=10, s='foo', f=100.0, b=True)
</code></pre>
<p>è©³ç´°ã¯<a href="https://yukinarit.github.io/pyserde/api/serde/msgpack.html#to_msgpack">serde.msgpack.to_msgpack</a> / <a href="https://yukinarit.github.io/pyserde/api/serde/msgpack.html#from_msgpack">serde.msgpack.from_msgpack</a>ã‚’ã”è¦§ãã ã•ã„ã€‚</p>
<h2 id="pickle"><a class="header" href="#pickle">Pickle</a></h2>
<p>v0.9.6ã§æ–°ã—ãè¿½åŠ ã•ã‚Œã¾ã—ãŸ</p>
<pre><code class="language-python">&gt;&gt;&gt; from serde.pickle import from_pickle, to_pickle

&gt;&gt;&gt; to_pickle(Foo(i=10, s='foo', f=100.0, b=True))
b"\x80\x04\x95'\x00\x00\x00\x00\x00\x00\x00}\x94(\x8c\x01i\x94K\n\x8c\x01s\x94\x8c\x03foo\x94\x8c\x01f\x94G@Y\x00\x00\x00\x00\x00\x00\x8c\x01b\x94\x88u."

&gt;&gt;&gt; from_pickle(Foo, b"\x80\x04\x95'\x00\x00\x00\x00\x00\x00\x00}\x94(\x8c\x01i\x94K\n\x8c\x01s\x94\x8c\x03foo\x94\x8c\x01f\x94G@Y\x00\x00\x00\x00\x00\x00\x8c\x01b\x94\x88u.")
Foo(i=10, s='foo', f=100.0, b=True)
</code></pre>
<p>è©³ç´°ã¯<a href="https://yukinarit.github.io/pyserde/api/serde/pickle.html#to_pickle">serde.pickle.to_pickle</a> / <a href="https://yukinarit.github.io/pyserde/api/serde/pickle.html#from_pickle">serde.pickle.from_pickle</a>ã‚’ã”è¦§ãã ã•ã„ã€‚</p>
<h2 id="æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿å½¢å¼ã®ã‚µãƒãƒ¼ãƒˆãŒå¿…è¦ã§ã™ã‹"><a class="header" href="#æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿å½¢å¼ã®ã‚µãƒãƒ¼ãƒˆãŒå¿…è¦ã§ã™ã‹">æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿å½¢å¼ã®ã‚µãƒãƒ¼ãƒˆãŒå¿…è¦ã§ã™ã‹ï¼Ÿ</a></h2>
<p>pyserde ã‚’ã§ãã‚‹ã ã‘ã‚·ãƒ³ãƒ—ãƒ«ã«ä¿ã¤ãŸã‚ã€XML ã®ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹äºˆå®šã¯ã‚ã‚Šã¾ã›ã‚“ã€‚<br />
æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿å½¢å¼ã®ã‚µãƒãƒ¼ãƒˆãŒå¿…è¦ãªå ´åˆã¯ã€åˆ¥ã®Pythonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½œæˆã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚<br />
ãƒ‡ãƒ¼ã‚¿å½¢å¼ãŒdictã‚„tupleã«å¤‰æ›å¯èƒ½ã§ã‚ã‚Œã°ã€ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º/ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºAPIã®å®Ÿè£…ã¯ãã‚Œã»ã©é›£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚<br />
å®Ÿè£…æ–¹æ³•ã‚’çŸ¥ã‚ŠãŸã„å ´åˆã¯ã€<a href="https://github.com/yukinarit/pyserde/blob/main/serde/yaml.py">YAMLã®å®Ÿè£…</a>ã‚’ã”è¦§ãã ã•ã„ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="types"><a class="header" href="#types">Types</a></h1>
<p>ä»¥ä¸‹ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹å‹ã®ãƒªã‚¹ãƒˆã§ã™ã€‚å„å‹ã®ç°¡å˜ãªä¾‹ã¯è„šæ³¨ã«ã‚ã‚Šã¾ã™ã€‚</p>
<ul>
<li>ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ï¼ˆ<code>int</code>, <code>float</code>, <code>str</code>, <code>bool</code>ï¼‰<sup class="footnote-reference"><a href="#1">1</a></sup></li>
<li>ã‚³ãƒ³ãƒ†ãƒŠ
<ul>
<li><code>list</code>, <code>set</code>, <code>tuple</code>, <code>dict</code> <sup class="footnote-reference"><a href="#2">2</a></sup></li>
<li><a href="https://docs.python.org/3/library/stdtypes.html#frozenset"><code>frozenset</code></a> <sup class="footnote-reference"><a href="#3">3</a></sup></li>
<li><a href="https://docs.python.org/3/library/collections.html#collections.defaultdict"><code>defaultdict</code></a> <sup class="footnote-reference"><a href="#4">4</a></sup></li>
</ul>
</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Optional"><code>typing.Optional</code></a><sup class="footnote-reference"><a href="#5">5</a></sup></li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Union"><code>typing.Union</code></a> <sup class="footnote-reference"><a href="#6">6</a></sup> <sup class="footnote-reference"><a href="#7">7</a></sup> <sup class="footnote-reference"><a href="#8">8</a></sup></li>
<li><a href="https://docs.python.org/3/library/dataclasses.html"><code>@dataclass</code></a> ã‚’ç”¨ã„ãŸãƒ¦ãƒ¼ã‚¶å®šç¾©ã‚¯ãƒ©ã‚¹ <sup class="footnote-reference"><a href="#9">9</a></sup> <sup class="footnote-reference"><a href="#10">10</a></sup></li>
<li><a href="https://docs.python.org/3/library/typing.html#newtype"><code>typing.NewType</code></a> ã‚’ç”¨ã„ãŸãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–å‹ <sup class="footnote-reference"><a href="#11">11</a></sup></li>
<li><a href="https://docs.python.org/3/library/typing.html#the-any-type"><code>typing.Any</code></a> <sup class="footnote-reference"><a href="#12">12</a></sup></li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Literal"><code>typing.Literal</code></a> <sup class="footnote-reference"><a href="#13">13</a></sup></li>
<li><a href="https://docs.python.org/3/library/typing.html#user-defined-generic-types"><code>typing.Generic</code></a> <sup class="footnote-reference"><a href="#14">14</a></sup></li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.ClassVar"><code>typing.ClassVar</code></a> <sup class="footnote-reference"><a href="#15">15</a></sup></li>
<li><a href="https://docs.python.org/3/library/dataclasses.html#init-only-variables"><code>typing.InitVar</code></a> <sup class="footnote-reference"><a href="#16">16</a></sup></li>
<li><a href="https://docs.python.org/3/library/enum.html#enum.Enum"><code>Enum</code></a> ãŠã‚ˆã³ <a href="https://docs.python.org/3/library/enum.html#enum.IntEnum"><code>IntEnum</code></a> <sup class="footnote-reference"><a href="#17">17</a></sup></li>
<li>æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
<ul>
<li><a href="https://docs.python.org/3/library/pathlib.html"><code>pathlib.Path</code></a> <sup class="footnote-reference"><a href="#18">18</a></sup></li>
<li><a href="https://docs.python.org/3/library/decimal.html"><code>decimal.Decimal</code></a> <sup class="footnote-reference"><a href="#19">19</a></sup></li>
<li><a href="https://docs.python.org/3/library/uuid.html"><code>uuid.UUID</code></a> <sup class="footnote-reference"><a href="#20">20</a></sup></li>
<li><a href="https://docs.python.org/3/library/datetime.html#date-objects"><code>datetime.date</code></a>ã€<a href="https://docs.python.org/3/library/datetime.html#time-objects"><code>datetime.time</code></a>ã€<a href="https://docs.python.org/3/library/datetime.html#datetime-objects"><code>datetime.datetime</code></a> <sup class="footnote-reference"><a href="#21">21</a></sup></li>
<li><a href="https://docs.python.org/3/library/ipaddress.html"><code>ipaddress</code></a> <sup class="footnote-reference"><a href="#22">22</a></sup></li>
</ul>
</li>
<li>PyPIãƒ©ã‚¤ãƒ–ãƒ©ãƒª
<ul>
<li><a href="https://github.com/numpy/numpy"><code>numpy</code></a> ãƒ‡ãƒ¼ã‚¿å‹ <sup class="footnote-reference"><a href="#23">23</a></sup></li>
<li>å®£è¨€çš„ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ©ã‚¹ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’ç”¨ã„ãŸ <a href="https://github.com/sqlalchemy/sqlalchemy"><code>SQLAlchemy</code></a>ï¼ˆå®Ÿé¨“çš„ï¼‰<sup class="footnote-reference"><a href="#24">24</a></sup></li>
</ul>
</li>
</ul>
<p>ã“ã®ã‚ˆã†ã«è¤‡é›‘ãªã‚¯ãƒ©ã‚¹ã‚’è¨˜è¿°ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<pre><code class="language-python">@serde
class bar:
    i: int

@serde
class Foo:
    a: int
    b: list[str]
    c: tuple[int, float, str, bool]
    d: dict[str, list[tuple[str, int]]]
    e: str | None
    f: Bar
</code></pre>
<h2 id="numpy"><a class="header" href="#numpy">Numpy</a></h2>
<p>ä¸Šè¨˜ã®ã™ã¹ã¦ã®ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºæ–¹æ³•ã¯ã€<code>numpy</code>è¿½åŠ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ã»ã¨ã‚“ã©ã®numpyãƒ‡ãƒ¼ã‚¿å‹ã‚’é€éçš„ã«æ‰±ã†ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<pre><code class="language-python">import numpy as np
import numpy.typing as npt

@serde
class NPFoo:
    i: np.int32
    j: np.int64
    f: np.float32
    g: np.float64
    h: np.bool_
    u: np.ndarray
    v: npt.NDArray
    w: npt.NDArray[np.int32]
    x: npt.NDArray[np.int64]
    y: npt.NDArray[np.float32]
    z: npt.NDArray[np.float64]

npfoo = NPFoo(
    np.int32(1),
    np.int64(2),
    np.float32(3.0),
    np.float64(4.0),
    np.bool_(False),


 np.array([1, 2]),
    np.array([3, 4]),
    np.array([np.int32(i) for i in [1, 2]]),
    np.array([np.int64(i) for i in [3, 4]]),
    np.array([np.float32(i) for i in [5.0, 6.0]]),
    np.array([np.float64(i) for i in [7.0, 8.0]]),
)
</code></pre>
<pre><code class="language-python">&gt;&gt;&gt; from serde.json import to_json, from_json

&gt;&gt;&gt; to_json(npfoo)
'{"i": 1, "j": 2, "f": 3.0, "g": 4.0, "h": false, "u": [1, 2], "v": [3, 4], "w": [1, 2], "x": [3, 4], "y": [5.0, 6.0], "z": [7.0, 8.0]}'

&gt;&gt;&gt; from_json(NPFoo, to_json(npfoo))
NPFoo(i=1, j=2, f=3.0, g=4.0, h=False, u=array([1, 2]), v=array([3, 4]), w=array([1, 2], dtype=int32), x=array([3, 4]), y=array([5., 6.], dtype=float32), z=array([7., 8.]))
</code></pre>
<h2 id="sqlalchemyå®£è¨€çš„ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ©ã‚¹ãƒãƒƒãƒ”ãƒ³ã‚°å®Ÿé¨“çš„"><a class="header" href="#sqlalchemyå®£è¨€çš„ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ©ã‚¹ãƒãƒƒãƒ”ãƒ³ã‚°å®Ÿé¨“çš„">SQLAlchemyå®£è¨€çš„ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ©ã‚¹ãƒãƒƒãƒ”ãƒ³ã‚°ï¼ˆå®Ÿé¨“çš„ï¼‰</a></h2>
<p>SQLAlchemyå®£è¨€çš„ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ©ã‚¹ãƒãƒƒãƒ”ãƒ³ã‚°çµ±åˆã®å®Ÿé¨“çš„ã‚µãƒãƒ¼ãƒˆãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸãŒã€<code>@serde(type_check=strict)</code>ã‚„<code>serde.field()</code>ãªã©ã®ç‰¹å®šã®æ©Ÿèƒ½ã¯ç¾åœ¨ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>
<p>å®Ÿé¨“çš„ãªæ©Ÿèƒ½ã«ä¾å­˜ã™ã‚‹å ´åˆã€æœ¬ç•ªç’°å¢ƒã§ã®ä½¿ç”¨ã«ã¯æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚<br />
ã‚³ãƒ¼ãƒ‰ã‚’å¾¹åº•çš„ã«ãƒ†ã‚¹ãƒˆã—ã€æ½œåœ¨çš„ãªåˆ¶é™ã‚„äºˆæœŸã›ã¬å‹•ä½œã«æ³¨æ„ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚</p>
<h2 id="æ–°ã—ã„å‹ã®ã‚µãƒãƒ¼ãƒˆãŒå¿…è¦ã§ã™ã‹"><a class="header" href="#æ–°ã—ã„å‹ã®ã‚µãƒãƒ¼ãƒˆãŒå¿…è¦ã§ã™ã‹">æ–°ã—ã„å‹ã®ã‚µãƒãƒ¼ãƒˆãŒå¿…è¦ã§ã™ã‹ï¼Ÿ</a></h2>
<p>æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ç¾åœ¨ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„å‹ã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã¯ã€Githubã§issueã‚’ä½œæˆã—ã¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆã—ã¦ãã ã•ã„ã€‚<br />
ãªãŠã€ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã®Pythonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å‹ã«ã¤ã„ã¦ã¯ã€numpyã®ã‚ˆã†ãªäººæ°—ã®ã‚ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å‹ã‚’é™¤ãã€pyserdeã‚’ã§ãã‚‹ã ã‘ã‚·ãƒ³ãƒ—ãƒ«ã«ä¿ã¤ãŸã‚ã«ã‚µãƒãƒ¼ãƒˆã™ã‚‹äºˆå®šã¯ã‚ã‚Šã¾ã›ã‚“ã€‚<br />
ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ©ã‚¹ã‚„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã®ä½¿ç”¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚</p>
<div class="footnote-definition" id="1"><sup class="footnote-definition-label">1</sup>
<p><a href="https://github.com/yukinarit/pyserde/blob/main/examples/simple.py">examples/simple.py</a> ã‚’å‚ç…§</p>
</div>
<div class="footnote-definition" id="2"><sup class="footnote-definition-label">2</sup>
<p><a href="https://github.com/yukinarit/pyserde/blob/main/examples/collection.py">examples/collection.py</a> ã‚’å‚ç…§</p>
</div>
<div class="footnote-definition" id="3"><sup class="footnote-definition-label">3</sup>
<p><a href="https://github.com/yukinarit/pyserde/blob/main/examples/frozen_set.py">examples/frozen_set.py</a> ã‚’å‚ç…§</p>
</div>
<div class="footnote-definition" id="4"><sup class="footnote-definition-label">4</sup>
<p><a href="https://github.com/yukinarit/pyserde/blob/main/examples/default_dict.py">examples/default_dict.py</a> ã‚’å‚ç…§</p>
</div>
<div class="footnote-definition" id="5"><sup class="footnote-definition-label">5</sup>
<p><a href="https://github.com/yukinarit/pyserde/blob/main/examples/union.py">examples/union.py</a> ã‚’å‚ç…§</p>
</div>
<div class="footnote-definition" id="6"><sup class="footnote-definition-label">6</sup>
<p><a href="https://github.com/yukinarit/pyserde/blob/main/examples/union.py">examples/union.py</a> ã‚’å‚ç…§</p>
</div>
<div class="footnote-definition" id="7"><sup class="footnote-definition-label">7</sup>
<p><a href="https://github.com/yukinarit/pyserde/blob/main/examples/union_operator.py">examples/union_operator.py</a> ã‚’å‚ç…§</p>
</div>
<div class="footnote-definition" id="8"><sup class="footnote-definition-label">8</sup>
<p><a href="https://github.com/yukinarit/pyserde/blob/main/examples/union_tagging.py">examples/union_tagging.py</a> ã‚’å‚ç…§</p>
</div>
<div class="footnote-definition" id="9"><sup class="footnote-definition-label">9</sup>
<p><a href="https://github.com/yukinarit/pyserde/blob/main/examples/simple.py">examples/simple.py</a> ã‚’å‚ç…§</p>
</div>
<div class="footnote-definition" id="10"><sup class="footnote-definition-label">10</sup>
<p><a href="https://github.com/yukinarit/pyserde/blob/main/examples/nested.py">examples/nested.py</a> ã‚’å‚ç…§</p>
</div>
<div class="footnote-definition" id="11"><sup class="footnote-definition-label">11</sup>
<p><a href="https://github.com/yukinarit/pyserde/blob/main/examples/newtype.py">examples/newtype.py</a> ã‚’å‚ç…§</p>
</div>
<div class="footnote-definition" id="12"><sup class="footnote-definition-label">12</sup>
<p><a href="https://github.com/yukinarit/pyserde/blob/main/examples/any.py">examples/any.py</a> ã‚’å‚ç…§</p>
</div>
<div class="footnote-definition" id="13"><sup class="footnote-definition-label">13</sup>
<p><a href="https://github.com/yukinarit/pyserde/blob/main/examples/literal.py">examples/literal.py</a> ã‚’å‚ç…§</p>
</div>
<div class="footnote-definition" id="14"><sup class="footnote-definition-label">14</sup>
<p><a href="https://github.com/yukinarit/pyserde/blob/main/examples/generics.py">examples/generics.py</a> ã‚’å‚ç…§</p>
</div>
<div class="footnote-definition" id="15"><sup class="footnote-definition-label">15</sup>
<p><a href="https://github.com/yukinarit/pyserde/blob/main/examples/class_var.py">examples/class_var.py</a> ã‚’å‚ç…§</p>
</div>
<div class="footnote-definition" id="16"><sup class="footnote-definition-label">16</sup>
<p><a href="https://github.com/yukinarit/pyserde/blob/main/examples/init_var.py">examples/init_var.py</a> ã‚’å‚ç…§</p>
</div>
<div class="footnote-definition" id="17"><sup class="footnote-definition-label">17</sup>
<p><a href="https://github.com/yukinarit/pyserde/blob/main/examples/enum34.py">examples/enum34.py</a> ã‚’å‚ç…§</p>
</div>
<div class="footnote-definition" id="18"><sup class="footnote-definition-label">18</sup>
<p><a href="https://github.com/yukinarit/pyserde/blob/main/examples/type_pathlib.py">examples/type_pathlib.py</a> ã‚’å‚ç…§</p>
</div>
<div class="footnote-definition" id="19"><sup class="footnote-definition-label">19</sup>
<p><a href="https://github.com/yukinarit/pyserde/blob/main/examples/type_decimal.py">examples/type_decimal.py</a> ã‚’å‚ç…§</p>
</div>
<div class="footnote-definition" id="20"><sup class="footnote-definition-label">20</sup>
<p><a href="https://github.com/yukinarit/pyserde/blob/main/examples/type_uuid.py">examples/type_uuid.py</a> ã‚’å‚ç…§</p>
</div>
<div class="footnote-definition" id="21"><sup class="footnote-definition-label">21</sup>
<p><a href="https://github.com/yukinarit/pyserde/blob/main/examples/type_datetime.py">examples/type_datetime.py</a> ã‚’å‚ç…§</p>
</div>
<div class="footnote-definition" id="22"><sup class="footnote-definition-label">22</sup>
<p><a href="https://github.com/yukinarit/pyserde/blob/main/examples/type_ipaddress.py">examples/type_ipaddress.py</a> ã‚’å‚ç…§</p>
</div>
<div class="footnote-definition" id="23"><sup class="footnote-definition-label">23</sup>
<p><a href="https://github.com/yukinarit/pyserde/blob/main/examples/type_numpy.py">examples/type_numpy.py</a> ã‚’å‚ç…§</p>
</div>
<div class="footnote-definition" id="24"><sup class="footnote-definition-label">24</sup>
<p><a href="https://github.com/yukinarit/pyserde/blob/main/examples/type_sqlalchemy.py">examples/type_sqlalchemy.py</a> ã‚’å‚ç…§</p>
</div>
<div style="break-before: page; page-break-before: always;"></div><h1 id="decorators"><a class="header" href="#decorators">Decorators</a></h1>
<h2 id="serde"><a class="header" href="#serde"><code>@serde</code></a></h2>
<p><code>@serde</code> ã¯ <code>@serialize</code> ã¨ <code>@deserialize</code> ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã®ãƒ©ãƒƒãƒ‘ãƒ¼ã§ã™ã€‚</p>
<p>ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ãŒã‚ã‚‹ã¨ã—ã¾ã™ã€‚</p>
<pre><code class="language-python">@serde
class Foo:
    ...
</code></pre>
<p>ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã¯ã€ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã¨åŒç­‰ã§ã™ã€‚</p>
<pre><code class="language-python">@deserialize
@serialize
@dataclass
class Foo:
    ...
</code></pre>
<p><code>@serde</code> ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã¯ä»¥ä¸‹ã‚’è¡Œã„ã¾ã™ã€‚</p>
<ul>
<li>ã‚¯ãƒ©ã‚¹ã« <code>@serialize</code> ã¨ <code>@deserialize</code> ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã‚’è¿½åŠ ã—ã¾ã™ã€‚</li>
<li>ã‚¯ãƒ©ã‚¹ãŒ <code>@dataclass</code> ã‚’æŒã£ã¦ã„ãªã„å ´åˆã€<code>@dataclass</code> ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã‚’è¿½åŠ ã—ã¾ã™ã€‚</li>
<li>ä¸¡æ–¹ã®ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºå±æ€§ã‚’ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã«æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚
<ul>
<li><code>serializer</code> å±æ€§ã¯ <code>@deserialize</code> ã§ç„¡è¦–ã•ã‚Œã€<code>deserializer</code> å±æ€§ã¯ <code>@serialize</code> ã§ç„¡è¦–ã•ã‚Œã¾ã™ã€‚</li>
</ul>
</li>
</ul>
<pre><code class="language-python">@serde(serializer=serializer, deserializer=deserializer)
@dataclass
class Foo:
    ...
</code></pre>
<blockquote>
<p><strong>æ³¨è¨˜:</strong> <code>@serde</code> ã¯ <code>@dataclass</code> ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ãªã—ã§å‹•ä½œã—ã¾ã™ã€‚<br />
ã“ã‚Œã¯serdeãŒ <code>@dataclass</code> ã‚’è‡ªå‹•çš„ã«æ¤œå‡ºã—ã€å®£è¨€ã•ã‚ŒãŸã‚¯ãƒ©ã‚¹ã«è¿½åŠ ã™ã‚‹ã‹ã‚‰ã§ã™ã€‚<br />
ã—ã‹ã— <code>@dataclass</code> ã‚’å®šç¾©ã—ãªã„å ´åˆã€mypy ã§ã¯ <code>Too many arguments</code> ã¾ãŸã¯ <code>Unexpected keyword argument</code> ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ã€‚ã“ã‚Œã¯ <a href="https://mypy.readthedocs.io/en/stable/additional_features.html#caveats-known-issues">mypy ã®åˆ¶é™</a>ã«ã‚ˆã‚‹ã‚‚ã®ã§ã™ã€‚</p>
<pre><code class="language-python">@serde
class Foo:
    ...
</code></pre>
<p>ã—ã‹ã—ã€PEP681ã«æº–æ‹ ã—ãŸå‹ãƒã‚§ãƒƒã‚«ãƒ¼ï¼ˆä¾‹ï¼špyrightï¼‰ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€pyserdeãŒ <a href="https://peps.python.org/pep-0681/">PEP681 dataclass_transform</a> ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ãŸã‚ã€å‹ã‚¨ãƒ©ãƒ¼ã¯ç™ºç”Ÿã—ã¾ã›ã‚“ã€‚</p>
</blockquote>
<h2 id="serialize-ã¨-deserialize"><a class="header" href="#serialize-ã¨-deserialize"><code>@serialize</code> ã¨ <code>@deserialize</code></a></h2>
<p><code>@serialize</code> ãŠã‚ˆã³ <code>@deserialize</code> ã¯å†…éƒ¨çš„ã« <code>@serde</code> ã«ã‚ˆã£ã¦ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚<br />
ä»¥ä¸‹ã«è©²å½“ã™ã‚‹å ´åˆã€ã“ã‚Œã‚‰2ã¤ã®ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚</p>
<ul>
<li>ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã¾ãŸã¯ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã®æ©Ÿèƒ½ã®ã¿ãŒå¿…è¦ãªå ´åˆ</li>
<li>ä»¥ä¸‹ã®ã‚ˆã†ã«ç•°ãªã‚‹ã‚¯ãƒ©ã‚¹å±æ€§ã‚’æŒã¤ã“ã¨ã‚’æœ›ã‚€å ´åˆ</li>
</ul>
<pre><code class="language-python">@deserialize(rename_all = "snakecase")
@serialize(rename_all = "camelcase")
class Foo:
    ...
</code></pre>
<p>ä¸Šè¨˜ã«å½“ã¦ã¯ã¾ã‚‰ãªã„å ´åˆã¯ <code>@serde</code> ã®ä½¿ç”¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚</p>
<h2 id="serde-ãªã—ã§ã‚¯ãƒ©ã‚¹ã‚’ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã™ã‚‹"><a class="header" href="#serde-ãªã—ã§ã‚¯ãƒ©ã‚¹ã‚’ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã™ã‚‹"><code>@serde</code> ãªã—ã§ã‚¯ãƒ©ã‚¹ã‚’ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã™ã‚‹</a></h2>
<p>pyserdeã¯ v0.10.0 ä»¥é™ã€<code>@serde</code> ãªã—ã§ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ©ã‚¹ã‚’ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã§ãã¾ã™ã€‚<br />
ã“ã®æ©Ÿèƒ½ã¯ã€å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§å®£è¨€ã•ã‚ŒãŸã‚¯ãƒ©ã‚¹ã‚’ä½¿ç”¨ã—ãŸã„å ´åˆã‚„ã€<code>@serde</code> ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ãŒå‹ãƒã‚§ãƒƒã‚«ãƒ¼ã§æ©Ÿèƒ½ã—ãªã„å ´åˆã«ä¾¿åˆ©ã§ã™ã€‚<a href="https://github.com/yukinarit/pyserde/blob/main/examples/plain_dataclass.py">ã“ã®ä¾‹</a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<p>ã©ã®ã‚ˆã†ã«å‹•ä½œã™ã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ<br />
ãã‚Œã¯éå¸¸ã«å˜ç´”ã§ã€ã‚¯ãƒ©ã‚¹ãŒ<code>@serde</code>ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã‚’æŒã£ã¦ã„ãªã„å ´åˆã€pyserdeã¯ <code>@serde</code> ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã‚’è¿½åŠ ã—ã¾ã™ã€‚<br />
æœ€åˆã®APIå‘¼ã³å‡ºã—ã«ã¯æ™‚é–“ãŒã‹ã‹ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã¯å†…éƒ¨çš„ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã‚‹ãŸã‚å•é¡Œã«ã¯ãªã‚Šã¾ã›ã‚“ã€‚</p>
<p>ä»¥ä¸‹ã«ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¯ãƒ©ã‚¹ã‚’ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã™ã‚‹ä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚</p>
<pre><code class="language-python">@dataclass
class External:
    ...

to_dict(External()) # "@serde" ãªã—ã§å‹•ä½œã—ã¾ã™
</code></pre>
<p>ã“ã®å ´åˆã€<code>rename_all</code> ãªã©ã®ã‚¯ãƒ©ã‚¹å±æ€§ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚<br />
å¤–éƒ¨ã®ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ©ã‚¹ã«ã‚¯ãƒ©ã‚¹å±æ€§ã‚’è¿½åŠ ã—ãŸã„å ´åˆã¯ã€ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ©ã‚¹ã‚’æ‹¡å¼µã™ã‚‹ã“ã¨ã§ãã‚Œã‚’è¡Œã†æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚<a href="https://github.com/yukinarit/pyserde/blob/main/examples/plain_dataclass_class_attribute.py">ã“ã®ä¾‹</a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<pre><code class="language-python">@dataclass
class External:
    some_value: int

@serde(rename_all="kebabcase")
@dataclass
class Wrapper(External):
    pass
</code></pre>
<h2 id="å‰æ–¹å‚ç…§ã‚’ã©ã®ã‚ˆã†ã«ä½¿ç”¨ã™ã‚‹ã‹"><a class="header" href="#å‰æ–¹å‚ç…§ã‚’ã©ã®ã‚ˆã†ã«ä½¿ç”¨ã™ã‚‹ã‹">å‰æ–¹å‚ç…§ã‚’ã©ã®ã‚ˆã†ã«ä½¿ç”¨ã™ã‚‹ã‹ï¼Ÿ</a></h2>
<p>pyserdeã¯å‰æ–¹å‚ç…§ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚<br />
ãƒã‚¹ãƒˆã•ã‚ŒãŸã‚¯ãƒ©ã‚¹åã‚’æ–‡å­—åˆ—ã§ç½®ãæ›ãˆã‚‹ã¨ã€pyserdeã¯ãƒã‚¹ãƒˆã•ã‚ŒãŸã‚¯ãƒ©ã‚¹ãŒå®šç¾©ã•ã‚ŒãŸå¾Œã«ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã‚’æ¢ã—ã¦è©•ä¾¡ã—ã¾ã™ã€‚</p>
<pre><code class="language-python">from __future__ import annotations # annotationsã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

@dataclass
class Foo:
    i: int
    s: str
    bar: Bar  # "Bar" ã¯å¾Œã§å®£è¨€ã•ã‚Œã¦ã„ã¦ã‚‚æŒ‡å®šã§ãã¾ã™

@serde
@dataclass
class Bar:
    f: float
    b: bool

# "Bar" ãŒå®šç¾©ã•ã‚ŒãŸå¾Œã« pyserde ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã‚’è©•ä¾¡ã—ã¾ã™
serde(Foo)
</code></pre>
<h2 id="pep563-annotationsã«ã‚ˆã‚‹é…å»¶è©•ä¾¡"><a class="header" href="#pep563-annotationsã«ã‚ˆã‚‹é…å»¶è©•ä¾¡">PEP563 Annotationsã«ã‚ˆã‚‹é…å»¶è©•ä¾¡</a></h2>
<p>pyserdeã¯ <a href="https://peps.python.org/pep-0563/">PEP563 Annotationsã«ã‚ˆã‚‹é…å»¶è©•ä¾¡</a>ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚</p>
<pre><code class="language-python">from __future__ import annotations
from serde import serde

@serde
class Foo:
    i: int
    s: str
    f: float
    b: bool

    def foo(self, cls: Foo):  # å®šç¾©ã•ã‚Œã‚‹å‰ã« "Foo" å‹ã‚’ä½¿ç”¨ã§ãã¾ã™
        print('foo')
</code></pre>
<p>å®Œå…¨ãªä¾‹ã«ã¤ã„ã¦ã¯ <a href="https://github.com/yukinarit/pyserde/blob/main/examples/lazy_type_evaluation.py">examples/lazy_type_evaluation.py</a> ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="class-attributes"><a class="header" href="#class-attributes">Class Attributes</a></h1>
<p>ã‚¯ãƒ©ã‚¹å±æ€§ã¯ã€ã‚¯ãƒ©ã‚¹ã®ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã®å‹•ä½œã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹ãŸã‚ã« <code>serialize</code> / <code>deserialize</code> ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã®å¼•æ•°ã¨ã—ã¦æŒ‡å®šã§ãã¾ã™ã€‚<br />
ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸã„å ´åˆã¯ã€<a href="field-attributes.html">ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å±æ€§</a>ã®ä½¿ç”¨ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚</p>
<h2 id="dataclassesã®å±æ€§"><a class="header" href="#dataclassesã®å±æ€§">dataclassesã®å±æ€§</a></h2>
<h3 id="frozen"><a class="header" href="#frozen"><strong><code>frozen</code></strong></a></h3>
<p>dataclassã® <code>frozen</code> ã‚¯ãƒ©ã‚¹å±æ€§ã¯æœŸå¾…é€šã‚Šã«æ©Ÿèƒ½ã—ã¾ã™ã€‚</p>
<h3 id="kw_only"><a class="header" href="#kw_only"><strong><code>kw_only</code></strong></a></h3>
<p>ãƒãƒ¼ã‚¸ãƒ§ãƒ³0.12.2ã§æ–°è¦è¿½åŠ ã€‚dataclassã® <code>kw_only</code> ã‚¯ãƒ©ã‚¹å±æ€§ã¯æœŸå¾…é€šã‚Šã«æ©Ÿèƒ½ã—ã¾ã™ã€‚</p>
<pre><code class="language-python">@serde
@dataclass(kw_only=True)
class Foo:
    i: int
    s: str
    f: float
    b: bool
</code></pre>
<p>å®Œå…¨ãªä¾‹ã«ã¤ã„ã¦ã¯ã€<a href="https://github.com/yukinarit/pyserde/blob/main/examples/kw_only.py">examples/kw_only.py</a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<h2 id="pyserdeã®å±æ€§"><a class="header" href="#pyserdeã®å±æ€§">pyserdeã®å±æ€§</a></h2>
<h3 id="rename_all"><a class="header" href="#rename_all"><strong><code>rename_all</code></strong></a></h3>
<p><code>rename_all</code> ã‚’ä½¿ã†ã¨ã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã‚’æŒ‡å®šã•ã‚ŒãŸã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ã‚¤ãƒ«ã«å¤‰æ›ã§ãã¾ã™ã€‚<br />
ä»¥ä¸‹ã®ä¾‹ã§ã¯ã€ã‚­ãƒ£ãƒ¡ãƒ«ã‚±ãƒ¼ã‚¹ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã‚’ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹ã«å¤‰æ›ã—ã¦ã„ã¾ã™ã€‚
ã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ã‚¤ãƒ«ã®å¤‰æ›å‡¦ç†ã¯ <a href="https://github.com/dmlls/python-casefy">python-casefy</a> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ä¾å­˜ã—ã¦ã„ã¾ã™ã€‚<br />
ã‚µãƒãƒ¼ãƒˆã•ã‚Œã‚‹ã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ã‚¤ãƒ«ã®ä¸€è¦§ã¯ <a href="https://dmlls.github.io/python-casefy/api.html">python-casefy ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<pre><code class="language-python">@serde(rename_all = 'camelcase')
class Foo:
    int_field: int
    str_field: str

f = Foo(int_field=10, str_field='foo')
print(to_json(f))
</code></pre>
<p>ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€<code>int_field</code> ã¯ <code>intField</code> ã«ã€<code>str_field</code> ã¯ <code>strField</code> ã«å¤‰æ›ã•ã‚Œã¾ã™ã€‚</p>
<pre><code class="language-json">{"intField": 10, "strField": "foo"}
</code></pre>
<blockquote>
<p><strong>æ³¨è¨˜:</strong> <code>rename_all</code> ã‚¯ãƒ©ã‚¹å±æ€§ã¨ <code>rename</code> ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å±æ€§ãŒåŒæ™‚ã«ä½¿ç”¨ã•ã‚Œã‚‹å ´åˆã€<code>rename</code> ãŒå„ªå…ˆã•ã‚Œã¾ã™ã€‚</p>
<pre><code class="language-python">@serde(rename_all = 'camelcase')
class Foo:
    int_field: int
    str_field: str = field(rename='str-field')

f = Foo(int_field=10, str_field='foo')
print(to_json(f))
</code></pre>
<p>ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚</p>
<pre><code>{"intField": 10, "str-field": "foo"}
</code></pre>
</blockquote>
<p>å®Œå…¨ãªä¾‹ã«ã¤ã„ã¦ã¯ã€<a href="https://github.com/yukinarit/pyserde/blob/main/examples/rename_all.py">examples/rename_all.py</a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<h3 id="tagging"><a class="header" href="#tagging"><strong><code>tagging</code></strong></a></h3>
<p>ãƒãƒ¼ã‚¸ãƒ§ãƒ³0.7.0ã§æ–°è¦è¿½åŠ ã€‚è©³ç´°ã¯ <a href="union.html">Union</a> ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<h3 id="class_serializer-ã¨-class_deserializer"><a class="header" href="#class_serializer-ã¨-class_deserializer"><strong><code>class_serializer</code></strong> ã¨ <strong><code>class_deserializer</code></strong></a></h3>
<p>ãƒãƒ¼ã‚¸ãƒ§ãƒ³0.13.0ã§æ–°è¦è¿½åŠ ã€‚</p>
<p>ã‚¯ãƒ©ã‚¹ãƒ¬ãƒ™ãƒ«ã§ã‚«ã‚¹ã‚¿ãƒ (ãƒ‡)ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã‚’ä½¿ç”¨ã—ãŸã„å ´åˆã€<code>class_serializer</code> ãŠã‚ˆã³ <code>class_deserializer</code> å±æ€§ã«(ãƒ‡)ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚<br />
ã‚«ã‚¹ã‚¿ãƒ (ãƒ‡)ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã¯ã€C++ã®ã‚ˆã†ã«è¤‡æ•°ã®ãƒ¡ã‚½ãƒƒãƒ‰ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã‚’å¯èƒ½ã«ã™ã‚‹Pythonãƒ©ã‚¤ãƒ–ãƒ©ãƒª <a href="https://github.com/beartype/plum">plum</a> ã«ä¾å­˜ã—ã¦ã„ã¾ã™ã€‚<br />
plumã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€å …ç‰¢ãªã‚«ã‚¹ã‚¿ãƒ (ãƒ‡)ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã‚’ç°¡å˜ã«æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<pre><code class="language-python">class MySerializer:
    @dispatch
    def serialize(self, value: datetime) -&gt; str:
        return value.strftime("%d/%m/%y")

class MyDeserializer:
    @dispatch
    def deserialize(self, cls: Type[datetime], value:

 Any) -&gt; datetime:
        return datetime.strptime(value, "%d/%m/%y")

@serde(class_serializer=MySerializer(), class_deserializer=MyDeserializer())
class Foo:
    v: datetime
</code></pre>
<p>æ—§æ¥ã® <code>serializer</code> ã¨ <code>deserializer</code> ã¨ã®å¤§ããªé•ã„ã¯ã€ æ–°ã—ã„<code>class_serializer</code> ã¨ <code>class_deserializer</code> ãŒ pyserde ã®ã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ¬ãƒ™ãƒ«ã§ã‚ˆã‚Šæ·±ãçµ±åˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ã§ã™ã€‚<br />
ã“ã‚Œã«ã‚ˆã‚Š Optional ã‚„ Listã€ãƒã‚¹ãƒˆã•ã‚ŒãŸ dataclass ã‚’è‡ªåˆ†ã§å‡¦ç†ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
<p>ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ©ã‚¹ã®(ãƒ‡)ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã¯ã™ã¹ã¦ã®(ãƒ‡)ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã®ãƒ¬ãƒ™ãƒ«ï¼ˆå˜ç´”ãªãƒ‡ãƒ¼ã‚¿å‹ã‹ã‚‰è¤‡é›‘ãªãƒã‚¹ãƒˆã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿æ§‹é€ ã¾ã§ã€ã‚ã‚‰ã‚†ã‚‹ç¨®é¡ã®(ãƒ‡)ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºå‡¦ç†ï¼‰ã§ä½¿ç”¨ã•ã‚Œã‚‹ãŸã‚ã€ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£è£½ã®å‹ã‚‚ãƒ“ãƒ«ãƒˆã‚¤ãƒ³å‹ã®ã‚ˆã†ã«æ‰±ã†ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚</p>
<p>ã¾ãŸã€</p>
<ul>
<li>ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã¨ã‚¯ãƒ©ã‚¹ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã®ä¸¡æ–¹ãŒæŒ‡å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ãŒå„ªå…ˆã•ã‚Œã¾ã™ã€‚</li>
<li>æ—§ã¨æ–°ã®ã‚¯ãƒ©ã‚¹ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã®ä¸¡æ–¹ãŒæŒ‡å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã€æ–°ã—ã„ã‚¯ãƒ©ã‚¹ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ãŒå„ªå…ˆã•ã‚Œã¾ã™ã€‚</li>
</ul>
<blockquote>
<p>ğŸ’¡ ãƒ’ãƒ³ãƒˆï¼šè¤‡æ•°ã® <code>serialize</code> ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè£…ã™ã‚‹å ´åˆã€å‹ãƒã‚§ãƒƒã‚«ãƒ¼ã‹ã‚‰ã€<code>Redefinition of unused serialize</code>ã¨ã„ã†è­¦å‘ŠãŒå‡ºã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚<br />
ãã®å ´åˆã¯ã€<code>plum.overload</code> ã¨ <code>plum.dispatch</code> ã‚’ä½¿ç”¨ã—ã¦å›é¿ã—ã¦ãã ã•ã„ã€‚<br />
è©³ç´°ã¯ <a href="https://beartype.github.io/plum/integration.html">plumã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a> ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<pre><code class="language-python">from plum import dispatch, overload

class Serializer:
   # @overload ã‚’ä½¿ç”¨
   @overload
   def serialize(self, value: int) -&gt; Any:
       return str(value)

   # @overload ã‚’ä½¿ç”¨
   @overload
   def serialize(self, value: float) -&gt; Any:
       return int(value)

   # ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ æ™‚ã¯å¿…ãš @dispatch ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚PlumãŒå‹ãƒã‚§ãƒƒã‚«ãƒ¼ã‹ã‚‰ã®è­¦å‘Šã‚’æ¶ˆã—ã¦ãã‚Œã¾ã™
   @dispatch
   def serialize(self, value: Any) -&gt; Any:
       ...
</code></pre>
</blockquote>
<p>å®Œå…¨ãªä¾‹ã«ã¤ã„ã¦ã¯ã€<a href="https://github.com/yukinarit/pyserde/blob/main/examples/custom_class_serializer.py">examples/custom_class_serializer.py</a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<h3 id="serializer-ã¨-deserializer"><a class="header" href="#serializer-ã¨-deserializer"><strong><code>serializer</code></strong> ã¨ <strong><code>deserializer</code></strong></a></h3>
<blockquote>
<p><strong>æ³¨è¨˜:</strong> <code>serializer</code>** ã¨ **<code>deserializer</code>ã¯ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³0.13.0ä»¥é™ã€éæ¨å¥¨ã¨ãªã‚Šã¾ã—ãŸã€‚<br />
<code>class_serializer</code> ãŠã‚ˆã³ <code>class_deserializer</code> ã®ä½¿ç”¨ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚</p>
</blockquote>
<p>ã‚¯ãƒ©ã‚¹ãƒ¬ãƒ™ãƒ«ã§ã‚«ã‚¹ã‚¿ãƒ ã®(ãƒ‡)ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã‚’ä½¿ç”¨ã—ãŸã„å ´åˆã€<code>serializer</code> ãŠã‚ˆã³ <code>deserializer</code> å±æ€§ã«(ãƒ‡)ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<pre><code class="language-python">def serializer(cls, o):
    if cls is datetime:
        return o.strftime('%d/%m/%y')
    else:
        raise SerdeSkip()

def deserializer(cls, o):
    if cls is datetime:
        return datetime.strptime(o, '%d/%m/%y')
    else:
        raise SerdeSkip()

@serde(serializer=serializer, deserializer=deserializer)
class Foo:
    a: datetime
</code></pre>
<p>å®Œå…¨ãªä¾‹ã«ã¤ã„ã¦ã¯ã€<a href="https://github.com/yukinarit/pyserde/blob/main/examples/custom_legacy_class_serializer.py">examples/custom_legacy_class_serializer.py</a> ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<h3 id="type_check"><a class="header" href="#type_check"><strong><code>type_check</code></strong></a></h3>
<p>ãƒãƒ¼ã‚¸ãƒ§ãƒ³0.9.0ã§æ–°è¦è¿½åŠ ã€‚è©³ç´°ã¯ <a href="type-check.html">Type Check</a> ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<h3 id="serialize_class_var"><a class="header" href="#serialize_class_var"><strong><code>serialize_class_var</code></strong></a></h3>
<p>ãƒãƒ¼ã‚¸ãƒ§ãƒ³0.9.8ã§æ–°è¦è¿½åŠ ã€‚</p>
<p><code>dataclasses.fields</code> ã¯ã‚¯ãƒ©ã‚¹å¤‰æ•°ã‚’å«ã¾ãªã„ãŸã‚<sup class="footnote-reference"><a href="#1">1</a></sup>ã€pyserdeã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã‚¯ãƒ©ã‚¹å¤‰æ•°ã‚’ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã—ã¾ã›ã‚“ã€‚<br />
<code>serialize_class_var</code> ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ <code>typing.ClassVar</code> ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<pre><code class="language-python">@serde(serialize_class_var=True)
class Foo:
    a: ClassVar[int] = 10
</code></pre>
<p>å®Œå…¨ãªä¾‹ã«ã¤ã„ã¦ã¯ã€<a href="https://github.com/yukinarit/pyserde/blob/main/examples/class_var.py">examples/class_var.py</a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<div class="footnote-definition" id="1"><sup class="footnote-definition-label">1</sup>
<p><a href="https://docs.python.org/3/library/dataclasses.html#dataclasses.fields">dataclasses.fields</a></p>
</div>
<h3 id="deny_unknown_fields"><a class="header" href="#deny_unknown_fields"><strong><code>deny_unknown_fields</code></strong></a></h3>
<p>ãƒãƒ¼ã‚¸ãƒ§ãƒ³0.22.0ã§æ–°è¦è¿½åŠ ã€‚ pyserdeãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã®<code>deny_unknown_fields</code>ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºæ™‚ã®ã‚ˆã‚Šå³æ ¼ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒã‚§ãƒƒã‚¯ã‚’åˆ¶å¾¡ã§ãã¾ã™ã€‚ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’Trueã«ã™ã‚‹ã¨ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºæ™‚ã«å®£è¨€ã•ã‚Œã¦ã„ãªã„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒè¦‹ã¤ã‹ã‚‹ã¨<code>SerdeError</code>ã‚’æŠ•ã’ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<p>ä»¥ä¸‹ã®ä¾‹ã‚’è€ƒãˆã¦ãã ã•ã„ã€‚</p>
<pre><code class="language-python">@serde(deny_unknown_fields=True)
class Foo:
    a: int
    b: str
</code></pre>
<p><code>deny_unknown_fields=True</code>ãŒæŒ‡å®šã•ã‚Œã¦ã„ã‚‹ã¨ã€ å®£è¨€ã•ã‚Œã¦ã„ã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰(ã“ã®å ´åˆaã¨b)ä»¥å¤–ãŒã‚¤ãƒ³ãƒ—ãƒƒãƒˆã«ã‚ã‚‹ã¨ä¾‹å¤–ã‚’æŠ•ã’ã¾ã™ã€‚ä¾‹ãˆã°ã€</p>
<pre><code>from_json(Foo, '{"a": 10, "b": "foo", "c": 100.0, "d": true}')
</code></pre>
<p>ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã¯ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰cã¨dã¨ã„ã†å®£è¨€ã•ã‚Œã¦ã„ãªã„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒã‚ã‚‹ãŸã‚ã‚¨ãƒ©ãƒ¼ã¨ãªã‚Šã¾ã™ã€‚</p>
<p>å®Œå…¨ãªä¾‹ã«ã¤ã„ã¦ã¯ã€<a href="https://github.com/yukinarit/pyserde/blob/main/examples/deny_unknown_fields.py">examples/deny_unknown_fields.py</a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="field-attributes"><a class="header" href="#field-attributes">Field Attributes</a></h1>
<p>ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å±æ€§ã¯ã€ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ©ã‚¹ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºå‹•ä½œã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹ãŸã‚ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã™ã€‚</p>
<h2 id="dataclassesã«ã‚ˆã£ã¦æä¾›ã•ã‚Œã‚‹å±æ€§"><a class="header" href="#dataclassesã«ã‚ˆã£ã¦æä¾›ã•ã‚Œã‚‹å±æ€§">dataclassesã«ã‚ˆã£ã¦æä¾›ã•ã‚Œã‚‹å±æ€§</a></h2>
<h3 id="default-ã¨-default_factory"><a class="header" href="#default-ã¨-default_factory"><strong><code>default</code></strong> ã¨ <strong><code>default_factory</code></strong></a></h3>
<p>dataclassesã® <code>default</code> ã¨ <code>default_factory</code> ã¯æœŸå¾…é€šã‚Šã«å‹•ä½œã—ã¾ã™ã€‚<br />
ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒ <code>default</code> ã¾ãŸã¯ <code>default_factory</code> å±æ€§ã‚’æŒã¤å ´åˆã€ãã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã‚ˆã†ã«æŒ¯ã‚‹èˆã„ã¾ã™ã€‚<br />
ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒãƒ‡ãƒ¼ã‚¿å†…ã«å­˜åœ¨ã™ã‚‹å ´åˆã€å½“è©²ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å€¤ãŒãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã•ã‚ŒãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«è¨­å®šã•ã‚Œã¾ã™ã€‚<br />
ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒãƒ‡ãƒ¼ã‚¿å†…ã«å­˜åœ¨ã—ãªã„å ´åˆã€æŒ‡å®šã•ã‚ŒãŸãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãŒãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã•ã‚ŒãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«è¨­å®šã•ã‚Œã¾ã™ã€‚</p>
<pre><code class="language-python">class Foo:
    a: int = 10
    b: int = field(default=10)  # field "a"ã¨åŒã˜
    c: dict[str, int] = field(default_factory=dict)

print(from_dict(Foo, {}))  # Foo(a=10, b=10, c={}) ã‚’å‡ºåŠ›
</code></pre>
<p>å®Œå…¨ãªä¾‹ã«ã¤ã„ã¦ã¯ã€<a href="https://github.com/yukinarit/pyserde/blob/main/examples/default.py">examples/default.py</a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<h3 id="classvar"><a class="header" href="#classvar"><strong><code>ClassVar</code></strong></a></h3>
<p><code>dataclasses.ClassVar</code> ã¯ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ©ã‚¹ã®ã‚¯ãƒ©ã‚¹å¤‰æ•°ã§ã‚ã‚Šã€dataclassã¯ClassVarã‚’æ“¬ä¼¼çš„ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨ã—ã¦æ‰±ã„ã¾ã™ã€‚<br />
<code>dataclasses.field</code> ã¯ã‚¯ãƒ©ã‚¹å¤‰æ•°ã‚’å«ã¾ãªã„ãŸã‚ã€pyserdeã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å‹•ä½œã¨ã—ã¦ <code>ClassVar</code> ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã—ã¾ã›ã‚“ã€‚<br />
ClassVarãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã™ã‚‹å ´åˆã¯ã€<a href="class-attributes.html#serialize_class_var">serialize_class_var</a>ã‚¯ãƒ©ã‚¹å±æ€§ã®ä½¿ç”¨ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚</p>
<p>å®Œå…¨ãªä¾‹ã«ã¤ã„ã¦ã¯ã€<a href="https://github.com/yukinarit/pyserde/blob/main/examples/class_var.py">examples/class_var.py</a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<h2 id="pyserdeã«ã‚ˆã£ã¦æä¾›ã•ã‚Œã‚‹å±æ€§"><a class="header" href="#pyserdeã«ã‚ˆã£ã¦æä¾›ã•ã‚Œã‚‹å±æ€§">pyserdeã«ã‚ˆã£ã¦æä¾›ã•ã‚Œã‚‹å±æ€§</a></h2>
<p>ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å±æ€§ã¯ <code>serde.field</code> ã¾ãŸã¯ <code>dataclasses.field</code> ã‚’é€šã˜ã¦æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚<br />
å‹ãƒã‚§ãƒƒã‚¯ãŒæ©Ÿèƒ½ã™ã‚‹ãŸã‚ã€ <code>serde.field</code> ã®ä½¿ç”¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚</p>
<p>ä»¥ä¸‹ã¯ã€<code>rename</code> å±æ€§ã‚’ <code>serde.field</code> ã¨ <code>dataclasses.field</code> ã®ä¸¡æ–¹ã§æŒ‡å®šã™ã‚‹ä¾‹ã§ã™ã€‚</p>
<pre><code class="language-python">@serde.serde
class Foo:
    a: str = serde.field(rename="A")
    b: str = dataclasses.field(metadata={"serde_rename"="B"})
</code></pre>
<h3 id="rename"><a class="header" href="#rename"><strong><code>rename</code></strong></a></h3>
<p><code>rename</code> ã¯ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºä¸­ã«ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã‚’å¤‰æ›´ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚<br />
ã“ã®å±æ€§ã¯ã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã«Pythonã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆäºˆç´„èªï¼‰ã‚’ä½¿ç”¨ã—ãŸã„å ´åˆã«ä¾¿åˆ©ã§ã™ã€‚</p>
<p>ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã¯ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å <code>id</code> ã‚’ <code>ID</code> ã«å¤‰æ›´ã™ã‚‹ä¾‹ã§ã™ã€‚</p>
<pre><code class="language-python">@serde
class Foo:
    id: int = field(rename="ID")
</code></pre>
<p>å®Œå…¨ãªä¾‹ã«ã¤ã„ã¦ã¯ã€<a href="https://github.com/yukinarit/pyserde/blob/main/examples/rename.py">examples/rename.py</a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<h3 id="skip"><a class="header" href="#skip"><strong><code>skip</code></strong></a></h3>
<p><code>skip</code> ã¯ã“ã®å±æ€§ã‚’æŒã¤ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã™ã€‚</p>
<pre><code class="language-python">@serde
class Resource:
    name: str
    hash: str
    metadata: dict[str, str] = field(default_factory=dict, skip=True)
</code></pre>
<p>å®Œå…¨ãªä¾‹ã«ã¤ã„ã¦ã¯ã€<a href="https://github.com/yukinarit/pyserde/blob/main/examples/skip.py">examples/skip.py</a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<h3 id="skip_if"><a class="header" href="#skip_if"><strong><code>skip_if</code></strong></a></h3>
<p><code>skip_if</code> ã¯æ¡ä»¶é–¢æ•°ãŒ <code>True</code> ã‚’è¿”ã™å ´åˆã«ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã™ã€‚</p>
<pre><code class="language-python">@serde
class World:
    buddy: str = field(default='', skip_if=lambda v: v == 'Pikachu')
</code></pre>
<p>å®Œå…¨ãªä¾‹ã«ã¤ã„ã¦ã¯ã€<a href="https://github.com/yukinarit/pyserde/blob/main/examples/skip.py">examples/skip.py</a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<h3 id="skip_if_false"><a class="header" href="#skip_if_false"><strong><code>skip_if_false</code></strong></a></h3>
<p><code>skip_if_false</code> ã¯ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒ <code>False</code> ã¨è©•ä¾¡ã•ã‚Œã‚‹å ´åˆã«ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã™ã€‚</p>
<p>ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã¯ <code>enemies</code> ãŒç©ºã§ã‚ã‚Œã°ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã™ã€‚</p>
<pre><code class="language-python">@serde
class World:
    enemies: list[str] = field(default_factory=list, skip_if_false=True)
</code></pre>
<p>å®Œå…¨ãªä¾‹ã«ã¤ã„ã¦ã¯ã€<a href="https://github.com/yukinarit/pyserde/blob/main/examples/skip.py">examples/skip.py</a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<h3 id="skip_if_default"><a class="header" href="#skip_if_default"><strong><code>skip_if_default</code></strong></a></h3>
<p><code>skip_if_default</code> ã¯ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¨ã‚¤ã‚³ãƒ¼ãƒ«ã§ã‚ã‚‹å ´åˆã«ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã™ã€‚</p>
<p>ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã¯ <code>town</code> ãŒ <code>Masara Town</code> ã§ã‚ã‚Œã°ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã™ã€‚</p>
<pre><code class="language-python">@serde
class World:
    town: str = field(default='Masara Town', skip_if_default=True)
</code></pre>
<p>å®Œå…¨ãªä¾‹ã«ã¤ã„ã¦ã¯ã€<a href="https://github.com/yukinarit/pyserde/blob/main/examples/skip.py">examples/skip.py</a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<h3 id="alias"><a class="header" href="#alias"><strong><code>alias</code></strong></a></h3>
<p>ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã«åˆ¥åã‚’è¨­å®šã§ãã¾ã™ã€‚ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã¯ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºæ™‚ã«ã®ã¿æ©Ÿèƒ½ã—ã¾ã™ã€‚</p>
<pre><code class="language-python">@serde
class Foo:
    a: str = field(alias=["b", "c"])
</code></pre>
<p>ä¸Šè¨˜ã®ä¾‹ã§ã¯ã€ <code>Foo</code> ã¯ <code>{"a": "..."}</code> , <code>{"b": "..."}</code> ã€ã¾ãŸã¯ <code>{"c": "..."}</code> ã®ã„ãšã‚Œã‹ã‹ã‚‰ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã§ãã¾ã™ã€‚</p>
<p>å®Œå…¨ãªä¾‹ã«ã¤ã„ã¦ã¯ã€<a href="https://github.com/yukinarit/pyserde/blob/main/examples/alias.py">examples/alias.py</a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<h2 id="serializer-ã¨-deserializer-1"><a class="header" href="#serializer-ã¨-deserializer-1"><strong><code>serializer</code></strong> ã¨ <strong><code>deserializer</code></strong></a></h2>
<p>ç‰¹å®šã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«å¯¾ã—ã¦ã‚«ã‚¹ã‚¿ãƒ ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã‚’ä½¿ç”¨ã—ãŸã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚</p>
<p>ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚±ãƒ¼ã‚¹ã§ã™ã€‚</p>
<ul>
<li>datetimeã‚’ç•°ãªã‚‹å½¢å¼ã§ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã—ãŸã„ã€‚</li>
<li>ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å‹ã‚’ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã—ãŸã„ã€‚</li>
</ul>
<p>ä»¥ä¸‹ã®ä¾‹ã§ã¯ã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ <code>a</code> ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã§ <code>"2021-01-01T00:00:00"</code> ã«ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã•ã‚Œã¾ã™ãŒã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ <code>b</code> ã¯ã‚«ã‚¹ã‚¿ãƒ ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã§ <code>"01/01/21"</code> ã«ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã•ã‚Œã¾ã™ã€‚</p>
<pre><code class="language-python">@serde
class Foo:
    a: datetime
    b: datetime = field(serializer=lambda x: x.strftime('%d/%m/%y'), deserializer=lambda x: datetime.strptime(x, '%d/%m/%y'))
</code></pre>
<p>å®Œå…¨ãªä¾‹ã«ã¤ã„ã¦ã¯ã€<a href="https://github.com/yukinarit/pyserde/blob/main/examples/custom_field_serializer.py">examples/custom_field_serializer.py</a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<h2 id="flatten"><a class="header" href="#flatten"><strong><code>flatten</code></strong></a></h2>
<p>ãƒã‚¹ãƒˆã•ã‚ŒãŸæ§‹é€ ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ãƒ•ãƒ©ãƒƒãƒˆã«ã§ãã¾ã™ã€‚</p>
<pre><code class="language-python">@serde
class Bar:
    c: float
    d: bool

@serde
class Foo:
    a: int
    b: str
    bar: Bar = field(flatten=True)
</code></pre>
<p>ä¸Šè¨˜ã®ä¾‹ã§ã¯ã€<code>Bar</code> ã® <code>c</code> ãŠã‚ˆã³ <code>d</code> ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒ <code>Foo</code> ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‹ã®ã‚ˆã†ã«ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã•ã‚Œã¾ã™ã€‚<br />
<code>Foo</code> ã‚’JSONå½¢å¼ã«ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã™ã‚‹ã¨ <code>{"a":10,"b":"foo","c":100.0,"d":true}</code> ã‚’å–å¾—ã—ã¾ã™ã€‚</p>
<p>å®Œå…¨ãªä¾‹ã«ã¤ã„ã¦ã¯ã€<a href="https://github.com/yukinarit/pyserde/blob/main/examples/flatten.py">examples/flatten.py</a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="union-representation"><a class="header" href="#union-representation">Union Representation</a></h1>
<p><code>pyserde&gt;=0.7</code> ã§ã¯ã€Union ãŒï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã•ã‚Œã‚‹æ–¹æ³•ã‚’åˆ¶å¾¡ã™ã‚‹ãŸã‚ã®å±æ€§ãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã®æ¦‚å¿µã¯ <a href="https://serde.rs/enum-representations.html">serde-rs</a> ã«ã‚ã‚‹ã‚‚ã®ã¨åŒã˜ã§ã™ã€‚</p>
<p>ã“ã‚Œã‚‰ã®è¡¨ç¾ã¯ dataclass ã«ã®ã¿é©ç”¨ã•ã‚Œã€dataclassã§ã¯ãªã„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯å¸¸ã« <code>Untagged</code> ã§ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã•ã‚Œã¾ã™ã€‚</p>
<h2 id="untagged"><a class="header" href="#untagged"><code>Untagged</code></a></h2>
<p>ä»¥ä¸‹ã¯ã€ <code>pyserde&lt;0.7</code> ã«ãŠã‘ã‚‹ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® Union è¡¨ç¾ã§ã™ã€‚dataclass ãŒä¸ãˆã‚‰ã‚ŒãŸå ´åˆã‚’ä¾‹ã«ä¸Šã’ã¾ã™ã€‚</p>
<pre><code class="language-python">@serde
class Bar:
    b: int

@serde
class Baz:
    b: int

@serde(tagging=Untagged)
class Foo:
    a: Union[Bar, Baz]
</code></pre>
<p>æ³¨æ„ç‚¹ã¨ã—ã¦ã€<code>Bar</code> ã¨ <code>Baz</code> ã¯åŒã˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã¨å‹ã‚’æŒã£ã¦ã„ã¾ã™ã€‚<br />
<code>Foo(Baz(10))</code> ã‚’è¾æ›¸ã«ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã™ã‚‹ã¨ã€<code>{"a": {"b": 10}}</code> ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚</p>
<p>ã—ã‹ã—ã€<code>{"a": {"b": 10}}</code> ã‚’ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã™ã‚‹ã¨ã€ <code>Foo(Baz(10))</code> ã§ã¯ãªã <code>Foo(Bar(10))</code> ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚<br />
ã“ã‚Œã¯ã€pyserde ãŒ <code>Untagged</code> ã‚’ä½¿ã£ãŸ Union ã® dataclass ã‚’æ­£ã—ãï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º<strong>ã§ããªã„</strong>ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚</p>
<p>ã“ã®ãŸã‚ã€pyserde ã¯ä»–ã® Union è¡¨ç¾ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚</p>
<h2 id="externaltagging"><a class="header" href="#externaltagging"><code>ExternalTagging</code></a></h2>
<p>ã“ã‚Œã¯ 0.7 ä»¥é™ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® Union è¡¨ç¾ã§ã™ã€‚<code>ExternalTagging</code> ã‚’ä½¿ç”¨ã—ãŸã‚¯ãƒ©ã‚¹å®£è¨€ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
<pre><code class="language-python">@serde(tagging=ExternalTagging)
class Foo:
    a: Union[Bar, Baz]
</code></pre>
<p><code>Foo(Baz(10))</code> ã‚’è¾æ›¸ã«ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã™ã‚‹ã¨ã€ <code>{"a": {"Baz": {"b": 10}}}</code> ãŒå¾—ã‚‰ã‚Œã€ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã™ã‚‹ã¨ <code>Foo(Baz(10))</code> ã«ãªã‚Šã¾ã™ã€‚</p>
<blockquote>
<p><strong>æ³¨æ„:</strong> dataclass ã§ãªã„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã€<code>tagging</code> å±æ€§ã«é–¢ã‚ã‚‰ãšå¸¸ã« <code>Untagged</code> ã§ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã•ã‚Œã¾ã™ã€‚<br />
ã“ã‚Œã¯ã‚¿ã‚°ã«ä½¿ç”¨ã§ãã‚‹æƒ…å ±ãŒãªã„ãŸã‚ã§ã™ã€‚<code>Untagged</code> ã®æ¬ ç‚¹ã¯ã€ç‰¹å®šã®ã‚¿ã‚¤ãƒ—ã‚’æ­£ã—ãéã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã§ããªã„ã“ã¨ã§ã™ã€‚</p>
<p>ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚¯ãƒ©ã‚¹ã® <code>Foo({1, 2, 3})</code> ã¯ <code>{"a": [1, 2, 3]}</code> ã«ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã•ã‚Œã¾ã™ãŒã€ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã™ã‚‹ã¨ <code>Foo([1, 2, 3])</code> ã«ãªã‚Šã¾ã™ã€‚</p>
<pre><code class="language-python">@serde(tagging=ExternalTagging)
class Foo:
   a: Union[list[int], set[int]]
</code></pre>
</blockquote>
<h2 id="internaltagging"><a class="header" href="#internaltagging"><code>InternalTagging</code></a></h2>
<p><code>InternalTagging</code> ã‚’ä½¿ç”¨ã—ãŸã‚¯ãƒ©ã‚¹å®£è¨€ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
<pre><code class="language-python">@serde(tagging=InternalTagging("type"))
class Foo:
    a: Union[Bar, Baz]
</code></pre>
<p><code>Foo(Baz(10))</code> ã‚’è¾æ›¸ã«ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã™ã‚‹ã¨ã€<code>{"a": {"type": "Baz", "b": 10}}</code> ãŒå¾—ã‚‰ã‚Œã€ãã‚Œã‚’ <code>Foo(Baz(10))</code> ã«ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã§ãã¾ã™ã€‚<br />
<code>type</code> ã‚¿ã‚°ã¯ <code>Baz</code> ã®è¾æ›¸å†…ã«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¾ã™ã€‚</p>
<h2 id="adjacenttagging"><a class="header" href="#adjacenttagging"><code>AdjacentTagging</code></a></h2>
<p><code>AdjacentTagging</code> ã‚’ä½¿ç”¨ã—ãŸã‚¯ãƒ©ã‚¹å®£è¨€ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
<pre><code class="language-python">@serde(tagging=AdjacentTagging("type", "content"))
class Foo:
    a: Union[Bar, Baz]
</code></pre>
<p><code>Foo(Baz(10))</code> ã‚’è¾æ›¸ã«ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã™ã‚‹ã¨ã€<code>{"a": {"type": "Baz", "content": {"b": 10}}}</code> ãŒå¾—ã‚‰ã‚Œã€ãã‚Œã‚’ <code>Foo(Baz(10))</code> ã«ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã§ãã¾ã™ã€‚<code>type</code> ã‚¿ã‚°ã¯ <code>Baz</code> ã®è¾æ›¸å†…ã«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚Œã€<code>Baz</code> ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯ <code>content</code> å†…ã«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¾ã™ã€‚</p>
<h2 id="union-å‹ã®ç›´æ¥çš„ãªãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º"><a class="header" href="#union-å‹ã®ç›´æ¥çš„ãªãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º">Union å‹ã®ç›´æ¥çš„ãªï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º</a></h2>
<p>v0.12.0 ã§æ–°ã—ãè¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚</p>
<p>v0.12 ä»¥å‰ã«ãŠã„ã¦ã€ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º APIï¼ˆä¾‹ï¼š <code>to_json</code>, <code>from_json</code>ï¼‰ã«ç›´æ¥ Union å‹ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ¸¡ã™ã“ã¨ã¯éƒ¨åˆ†çš„ã«ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã—ãŸãŒã€Union å‹ã¯å¸¸ã«ã‚¿ã‚°ç„¡ã—ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã—ãŸã€‚<br />
ã“ã‚Œã¯ã€åˆ©ç”¨è€…å´ã§ Union ã‚¿ã‚°ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãŒã§ããªã‹ã£ãŸã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚</p>
<p>ä»¥ä¸‹ã®ä¾‹ã¯ã€ã‚¿ã‚°ç„¡ã—ã®ãŸã‚ <code>Bar</code> ã«æ­£ã—ããƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã§ãã¾ã›ã‚“ã€‚</p>
<pre><code class="language-python">@serde
class Foo:
    a: int

@serde
class Bar:
    a: int

bar = Bar(10)
s = to_json(bar)
print(s)
# {"a": 10} ã‚’å‡ºåŠ›
print(from_json(Union[Foo, Bar], s))
# Foo(10) ã‚’å‡ºåŠ›
</code></pre>
<p>v0.12.0 ä»¥é™ã€pyserde ã¯ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º API ã§æ¸¡ã•ã‚ŒãŸ Union å‹ã‚’é©åˆ‡ã«æ‰±ãˆã¾ã™ã€‚<br />
Union å‹ã¯ã€pyserde ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¿ã‚°ä»˜ã‘ã§ã‚ã‚‹å¤–éƒ¨ã‚¿ã‚°ä»˜ã‘ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™ã€‚</p>
<p>ä»¥ä¸‹ã®ä¾‹ã¯ <code>Bar</code> ã¨ã—ã¦æ­£ã—ãï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã§ãã¾ã™ã€‚</p>
<pre><code class="language-python">@serde
class Foo:
    a: int

@serde
class Bar:
    a: int

bar = Bar(10)
s = to_json(bar, cls=Union[Foo, Bar])
print(s)
# {"Bar" {"a": 10}} ã‚’å‡ºåŠ›
print(from_json(Union[Foo, Bar], s))
# Bar(10) ã‚’å‡ºåŠ›
</code></pre>
<p>ã¾ãŸã€<code>serde.InternalTagging</code>ã€<code>serde.AdjacentTagging</code>ã€ãŠã‚ˆã³ <code>serde.Untagged</code> ã‚’ä½¿ç”¨ã—ã¦ã‚¿ã‚°ä»˜ã‘ã‚’å¤‰æ›´ã§ãã¾ã™ã€‚</p>
<p>ãã‚Œã§ã¯ã€ä¸Šè¨˜ã®ä¾‹ã‚’ç”¨ã„ã¦ã‚¿ã‚°ä»˜ã‘ã‚’å¤‰æ›´ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
<p>ã‚¿ã‚°ä»˜ã‘ã‚’å¤‰æ›´ã™ã‚‹ã«ã¯ã€ <code>to_json</code> ã«æ–°ã—ã„å¼•æ•° <code>cls</code> ã‚’æ¸¡ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚<br />
ã¾ãŸã€Unionã‚¯ãƒ©ã‚¹ã¯ <code>InternalTagging</code>ã€<code>AdjacentTagging</code>ã€ã¾ãŸã¯ <code>Untagged</code> ã§å¿…è¦ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨å…±ã«ãƒ©ãƒƒãƒ—ã•ã‚Œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>
<ul>
<li>
<p>InternalTagging</p>
<pre><code class="language-python">from serde import InternalTagging

s = to_json(bar, cls=InternalTagging("type", Union[Foo, Bar]))
print(s)
# {"type": "Bar", "a": 10} ã‚’å‡ºåŠ›
print(from_json(InternalTagging("type", Union[Foo, Bar]), s))
# Bar(10) ã‚’å‡ºåŠ›
</code></pre>
</li>
<li>
<p>AdjacentTagging</p>
<pre><code class="language-python">from serde

s = to_json(bar, cls=AdjacentTagging("type", "content", Union[Foo, Bar]))
print(s)
# {"type": "Bar", "content": {"a": 10}} ã‚’å‡ºåŠ›
print(from_json(AdjacentTagging("type", "content", Union[Foo, Bar]), s))
# Bar(10) ã‚’å‡ºåŠ›
</code></pre>
</li>
<li>
<p>Untagged</p>
<pre><code class="language-python">from serde import Untagged

s = to_json(bar, cls=Untagged(Union[Foo, Bar]))
print(s)
# {"a": 10} ã‚’å‡ºåŠ›
print(from_json(Untagged(Union[Foo, Bar]), s))
# Foo(10) ã‚’å‡ºåŠ›
</code></pre>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="type-checking"><a class="header" href="#type-checking">Type Checking</a></h1>
<p>pyserdeã¯v0.9ã‹ã‚‰ãƒ©ãƒ³ã‚¿ã‚¤ãƒ å‹ãƒã‚§ãƒƒã‚¯ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚<br />
v0.14ã§å®Œå…¨ã«ä½œã‚Šç›´ã•ã‚Œã€<a href="https://github.com/beartype/beartype">beartype</a>ã‚’ä½¿ç”¨ã—ã¦ã‚ˆã‚Šæ´—ç·´ã•ã‚Œä¿¡é ¼æ€§ã®é«˜ã„ã‚‚ã®ã¨ãªã‚Šã¾ã—ãŸã€‚<br />
å‹å®‰å…¨ã§å …ç‰¢ãªãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ããŸã‚ã«ã¯ã€å‹ãƒã‚§ãƒƒã‚¯ã‚’å¸¸ã«æœ‰åŠ¹ã«ã™ã‚‹ã“ã¨ã‚’å¼·ãæ¨å¥¨ã—ã¾ã™ã€‚</p>
<h2 id="strict"><a class="header" href="#strict"><code>strict</code></a></h2>
<p>å³æ ¼ãªå‹ãƒã‚§ãƒƒã‚¯ <code>strict</code> ã¯ã€ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã¨ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ§‹ç¯‰ã®éš›ã«ã™ã¹ã¦ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å€¤ã‚’å®£è¨€ã•ã‚ŒãŸå‹ã¨ç…§åˆã—ã¾ã™ã€‚<br />
ã“ã‚Œã¯v0.14ä»¥é™ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å‹ãƒã‚§ãƒƒã‚¯ãƒ¢ãƒ¼ãƒ‰ã§ã™ã€‚</p>
<p>ã“ã®ãƒ¢ãƒ¼ãƒ‰ã§ã¯ã€ã‚¯ãƒ©ã‚¹å±æ€§ã‚’æŒ‡å®šã›ãšã« <code>@serde</code> ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¦ã‚¯ãƒ©ã‚¹ã‚’å®£è¨€ã—ãŸå ´åˆã€<code>@serde(type_check=strict)</code> ã¨è¦‹ãªã•ã‚Œã€å³æ ¼ãªå‹ãƒã‚§ãƒƒã‚¯ãŒæœ‰åŠ¹ã«ãªã‚Šã¾ã™ã€‚</p>
<pre><code class="language-python">@serde
class Foo:
    s: str
</code></pre>
<p>ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚ˆã†ã«é–“é•ã£ãŸå‹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§<code>Foo</code>ã‚’å‘¼ã³å‡ºã™ã¨ã€</p>
<pre><code class="language-python">foo = Foo(10)
</code></pre>
<p>ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ã€‚</p>
<pre><code class="language-python">beartype.roar.BeartypeCallHintParamViolation: Method __main__.Foo.__init__() parameter s=10 violates type hint &lt;class 'str'&gt;, as int 10 not instance of str.
</code></pre>
<blockquote>
<p><strong>æ³¨è¨˜:</strong> 2024å¹´2æœˆæ™‚ç‚¹ã§beartypeã¯æ¤œè¨¼ãƒ•ãƒƒã‚¯ã‚’æä¾›ã—ã¦ã„ãªã„ãŸã‚ã€ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã‹ã‚‰ã¯SerdeErrorã§ã¯ãªãbeartypeã®ä¾‹å¤–ãŒç™ºç”Ÿã—ã¾ã™ã€‚</p>
</blockquote>
<p>åŒæ§˜ã«ã€é–“é•ã£ãŸå‹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºAPIã‚’å‘¼ã³å‡ºã™ã¨ã€</p>
<pre><code class="language-python">print(to_json(foo))
</code></pre>
<p>å†ã³ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ã€‚</p>
<pre><code class="language-python">serde.compat.SerdeError: Method __main__.Foo.__init__() parameter s=10 violates type hint &lt;class 'str'&gt;, as int 10 not instance of str.
</code></pre>
<blockquote>
<p><strong>æ³¨è¨˜:</strong> beartypeã«ã‚ˆã‚‹å‹ãƒã‚§ãƒƒã‚¯ã«ã¯ã„ãã¤ã‹ã®æ³¨æ„ç‚¹ãŒã‚ã‚Šã¾ã™ã€‚</p>
<ol>
<li>beartypeã¯å¤‰æ›´ã•ã‚ŒãŸãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æ¤œè¨¼ã§ãã¾ã›ã‚“ã€‚</li>
</ol>
<p>ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ <code>s</code> ãŒæœ€å¾Œã«å¤‰æ›´ã•ã‚Œã¦ã„ã¾ã™ãŒã€beartypeã¯ã“ã®ã‚±ãƒ¼ã‚¹ã‚’æ¤œå‡ºã§ãã¾ã›ã‚“ã€‚</p>
<pre><code class="language-python">@serde
class Foo:
    s: str

f = Foo("foo")
f.s = 100
</code></pre>
<ol start="2">
<li>beartypeã¯ã‚³ãƒ³ãƒ†ãƒŠå†…ã®å„è¦ç´ ã‚’æ¤œè¨¼ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚ã“ã‚Œã¯ãƒã‚°ã§ã¯ãªãã€beartypeã®è¨­è¨ˆåŸå‰‡ã§ã™ã€‚<a href="https://beartype.readthedocs.io/en/latest/faq/#faq-o1">Does beartype actually do anything?</a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</li>
</ol>
</blockquote>
<h2 id="coerce"><a class="header" href="#coerce"><code>coerce</code></a></h2>
<p>å‹å¼·åˆ¶ <code>coerce</code> ã¯ã€ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºä¸­ã«å€¤ã‚’å®£è¨€ã•ã‚ŒãŸå‹ã«è‡ªå‹•çš„ã«å¤‰æ›ã—ã¾ã™ã€‚</p>
<pre><code class="language-python">@serde(type_check=Coerce)
class Foo:
    s: str

foo = Foo(10)
# pyserdeã¯è‡ªå‹•çš„ã« int å€¤ã® 10 ã‚’ str ã® "10" ã«å¤‰æ›ã—ã¾ã™
# {"s": "10"}ãŒå‡ºåŠ›ã•ã‚Œã¾ã™
print(to_json(foo))
</code></pre>
<p>ã—ã‹ã—ã€å€¤ãŒå®£è¨€ã•ã‚ŒãŸå‹ã«å¤‰æ›ã§ããªã„å ´åˆï¼ˆä¾‹ãˆã°ã€å€¤ãŒ <code>foo</code> ã§å‹ãŒ <code>int</code> ã®å ´åˆï¼‰ã€pyserde ã¯<code>SerdeError</code> ã‚’ç™ºç”Ÿã•ã›ã¾ã™ã€‚</p>
<h2 id="disabled"><a class="header" href="#disabled"><code>disabled</code></a></h2>
<p>ã“ã‚Œã¯pyserde v0.8.3ãŠã‚ˆã³v0.9.xã¾ã§ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æŒ™å‹•ã§ã™ã€‚<br />
å‹å¼·åˆ¶ã¾ãŸã¯ãƒã‚§ãƒƒã‚¯ã¯å®Ÿè¡Œã•ã‚Œã¾ã›ã‚“ã€‚</p>
<p>åˆ©ç”¨è€…ãŒé–“é•ã£ãŸå€¤ã‚’å…¥åŠ›ã—ã¦ã‚‚ã€pyserdeã¯å‹ã®ä¸æ•´åˆã‚’ç„¡è¦–ã—ã¦å‡¦ç†ã‚’ç¶šè¡Œã—ã¾ã™ã€‚</p>
<pre><code class="language-python">@serde
class Foo:
    s: str

foo = Foo(10)
# pyserdeã¯å‹ã®æ•´åˆæ€§ã‚’ç¢ºèªã—ãªã„ãŸã‚ã€{"s": 10} ãŒå‡ºåŠ›ã•ã‚Œã¾ã™
print(to_json(foo))
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="extending-pyserde"><a class="header" href="#extending-pyserde">Extending pyserde</a></h1>
<p>pyserde ã¯ãƒ“ãƒ«ãƒˆã‚¤ãƒ³å‹ä»¥å¤–ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãŸã‚ã« pyserde ã‚’æ‹¡å¼µã™ã‚‹ 3 ã¤ã®æ–¹æ³•ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚</p>
<h2 id="ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶"><a class="header" href="#ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶">ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶</a></h2>
<p>è©³ç´°ã¯<a href="./field-attributes.html#serializerdeserializer">ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶</a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<blockquote>
<p>ğŸ’¡ ãƒ’ãƒ³ãƒˆï¼š<code>serde.field</code> ã‚’ç‹¬è‡ªã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰é–¢æ•°ã§ãƒ©ãƒƒãƒ—ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
<pre><code class="language-python">import serde

def field(*args, **kwargs):
    serde.field(*args, **kwargs, serializer=str)

@serde
class Foo:
    a: int = field(default=0)  # ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã®è¨­å®š
</code></pre>
</blockquote>
<h2 id="ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ©ã‚¹ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶"><a class="header" href="#ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ©ã‚¹ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶">ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ©ã‚¹ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶</a></h2>
<p>è©³ç´°ã¯<a href="./class-attributes.html#class_serializer--class_deserializer">ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ©ã‚¹ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶</a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<h2 id="ã‚«ã‚¹ã‚¿ãƒ ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶"><a class="header" href="#ã‚«ã‚¹ã‚¿ãƒ ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶">ã‚«ã‚¹ã‚¿ãƒ ã‚°ãƒ­ãƒ¼ãƒãƒ«ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶</a></h2>
<p><code>add_serializer</code> ã¨ <code>add_deserializer</code> ã‚’ä½¿ã£ã¦ã‚¯ãƒ©ã‚¹ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã‚’ç™»éŒ²ã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹å…¨ä½“ã§ã‚«ã‚¹ã‚¿ãƒ ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã‚’é©ç”¨ã§ãã¾ã™ã€‚</p>
<p>ç™»éŒ²ã•ã‚ŒãŸã‚¯ãƒ©ã‚¹ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã¯ pyserde ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«ç©ºé–“ã«ã‚¹ã‚¿ãƒƒã‚¯ã•ã‚Œã€ã™ã¹ã¦ã® pyserde ã‚¯ãƒ©ã‚¹ã§è‡ªå‹•çš„ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚</p>
<p>ä¾‹ï¼š<a href="https://pypi.org/project/isodate/">isodate</a>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã—ã¦ <code>datetime.timedelta</code> ã®ã‚«ã‚¹ã‚¿ãƒ ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã‚’å®Ÿè£…ã™ã‚‹ã€‚</p>
<p>ä»¥ä¸‹ã¯ã€<code>datetime.timedelta</code> ã®ãŸã‚ã®ã‚¯ãƒ©ã‚¹ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã‚’ç™»éŒ²ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚<br />
ã“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯å®Ÿéš›ã« PyPI ã§ <a href="https://pypi.org/project/pyserde-timedelta/">pyserde-timedelta</a> ã¨ã—ã¦å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
<pre><code class="language-python">from datetime import timedelta
from plum import dispatch
from typing import Type, Any
import isodate
import serde

class Serializer:
    @dispatch
    def serialize(self, value: timedelta) -&gt; Any:
        return isodate.duration_isoformat(value)

class Deserializer:
    @dispatch
    def deserialize(self, cls: Type[timedelta], value: Any) -&gt; timedelta:
        return isodate.parse_duration(value)

def init() -&gt; None:
    serde.add_serializer(Serializer())
    serde.add_deserializer(Deserializer())
</code></pre>
<p>ã“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®åˆ©ç”¨è€…ã¯ã€ <code>serde_timedelta.init()</code> ã‚’å‘¼ã³å‡ºã™ã ã‘ã§ <code>datetime.timedelta</code> ã®ã‚«ã‚¹ã‚¿ãƒ ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã®æ©Ÿèƒ½ã‚’å†åˆ©ç”¨ã§ãã¾ã™ã€‚</p>
<pre><code class="language-python">import serde_timedelta
from serde import serde
from serde.json import to_json, from_json
from datetime import timedelta

serde_timedelta.init()

@serde
class Foo:
    a: timedelta

f = Foo(timedelta(hours=10))
json = to_json(f)
print(json)
print(from_json(Foo, json))
</code></pre>
<p>ä»¥ä¸‹ã®ã‚ˆã†ã« <code>datetime.timedelta</code> ãŒISO 8601 å½¢å¼ã§ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã•ã‚Œã¾ã™ï¼</p>
<pre><code class="language-bash">{"a":"PT10H"}
Foo(a=datetime.timedelta(seconds=36000))
</code></pre>
<blockquote>
<p>ğŸ’¡ ãƒ’ãƒ³ãƒˆï¼šã‚¯ãƒ©ã‚¹ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã¯ã„ãã¤ã§ã‚‚ç™»éŒ²ã§ãã¾ã™ã€‚ã“ã‚Œã¯ã€å¥½ããªã ã‘pyserdeæ‹¡å¼µã‚’ä½¿ç”¨ã§ãã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚
ç™»éŒ²ã•ã‚ŒãŸï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã¯ãƒ¡ãƒ¢ãƒªã«ã‚¹ã‚¿ãƒƒã‚¯ã•ã‚Œã¾ã™ã€‚</p>
<p>ãªãŠã€1ã¤ã®ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã¯ä»–ã®ï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã«ã‚ˆã£ã¦ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</p>
<p>ä¾‹ï¼šæ¬¡ã®é †åºã§3ã¤ã®ã‚«ã‚¹ã‚¿ãƒ ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã‚’ç™»éŒ²ã™ã‚‹ã¨ã€æœ€åˆã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã¯3ç•ªç›®ã«ã‚ˆã£ã¦å®Œå…¨ã«ä¸Šæ›¸ãã•ã‚Œã¾ã™ã€‚2ç•ªç›®ã¯ç•°ãªã‚‹å‹ç”¨ã«å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ãŸã‚æ©Ÿèƒ½ã—ã¾ã™ã€‚</p>
<ol>
<li><code>int</code> ç”¨ã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã‚’ç™»éŒ²</li>
<li><code>float</code> ç”¨ã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã‚’ç™»éŒ²</li>
<li><code>int</code> ç”¨ã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã‚’ç™»éŒ²</li>
</ol>
</blockquote>
<p>ã“ã¡ã‚‰ã¯ã€v0.13.0 ã§æ–°ã—ãè¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="faq"><a class="header" href="#faq">FAQ</a></h1>
<h2 id="pyserdeã«ã‚ˆã£ã¦ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã‚’ã©ã®ã‚ˆã†ã«ç¢ºèªã§ãã¾ã™ã‹"><a class="header" href="#pyserdeã«ã‚ˆã£ã¦ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã‚’ã©ã®ã‚ˆã†ã«ç¢ºèªã§ãã¾ã™ã‹">pyserdeã«ã‚ˆã£ã¦ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã‚’ã©ã®ã‚ˆã†ã«ç¢ºèªã§ãã¾ã™ã‹ï¼Ÿ</a></h2>
<p>pyserdeã¯ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã¨ã—ã¦å‹•ä½œã™ã‚‹ <code>inspect</code> ã‚µãƒ–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚</p>
<pre><code>python -m serde.inspect &lt;PATH_TO_FILE&gt; &lt;CLASS&gt;
</code></pre>
<p>ä¾‹ï¼špyserdeãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p>
<pre><code>cd pyserde
poetry shell
python -m serde.inspect examples/simple.py Foo
</code></pre>
<p>å‡ºåŠ›</p>
<pre><code class="language-python">Loading simple.Foo from examples.

==================================================
                       Foo
==================================================

--------------------------------------------------
          Functions generated by pyserde
--------------------------------------------------
def to_iter(obj, reuse_instances=True, convert_sets=False):
    if reuse_instances is Ellipsis:
        reuse_instances = True
    if convert_sets is Ellipsis:
        convert_sets = False
    if not is_dataclass(obj):
        return copy.deepcopy(obj)

    Foo = serde_scope.types["Foo"]
    res = []
    res.append(obj.i)
    res.append(obj.s)
    res.append(obj.f)
    res.append(obj.b)
    return tuple(res)
...
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
